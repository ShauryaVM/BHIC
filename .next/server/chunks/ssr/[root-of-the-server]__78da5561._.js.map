{"version":3,"sources":["../../../../node_modules/date-fns/constants.js","../../../../node_modules/date-fns/constructFrom.js","../../../../node_modules/date-fns/toDate.js","../../../../node_modules/date-fns/addDays.js","../../../../node_modules/date-fns/subDays.js","../../../../node_modules/clsx/dist/clsx.mjs","../../../../src/components/ui/card.tsx","../../../../src/components/layout/page-header.tsx","../../../../src/lib/format.ts","../../../../node_modules/date-fns/startOfDay.js","../../../../src/components/ui/table.tsx","../../../../src/lib/analytics-data.ts","../../../../src/components/charts/bar-chart.tsx/__nextjs-internal-proxy.mjs","../../../../src/lib/events-data.ts","../../../../node_modules/date-fns/addMonths.js","../../../../node_modules/date-fns/subMonths.js","../../../../node_modules/date-fns/startOfMonth.js","../../../../src/lib/time-series.ts","../../../../node_modules/date-fns/endOfMonth.js","../../../../src/components/charts/pie-chart.tsx/__nextjs-internal-proxy.mjs","../../../../src/lib/donor-data.ts","../../../../src/app/%28dashboard%29/insights/_components/insights-report-button.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/%28dashboard%29/insights/page.tsx","../../../../src/lib/insights-data.ts"],"sourcesContent":["/**\n * @module constants\n * @summary Useful constants\n * @description\n * Collection of useful date constants.\n *\n * The constants could be imported from `date-fns/constants`:\n *\n * ```ts\n * import { maxTime, minTime } from \"./constants/date-fns/constants\";\n *\n * function isAllowedTime(time) {\n *   return time <= maxTime && time >= minTime;\n * }\n * ```\n */\n\n/**\n * @constant\n * @name daysInWeek\n * @summary Days in 1 week.\n */\nexport const daysInWeek = 7;\n\n/**\n * @constant\n * @name daysInYear\n * @summary Days in 1 year.\n *\n * @description\n * How many days in a year.\n *\n * One years equals 365.2425 days according to the formula:\n *\n * > Leap year occurs every 4 years, except for years that are divisible by 100 and not divisible by 400.\n * > 1 mean year = (365+1/4-1/100+1/400) days = 365.2425 days\n */\nexport const daysInYear = 365.2425;\n\n/**\n * @constant\n * @name maxTime\n * @summary Maximum allowed time.\n *\n * @example\n * import { maxTime } from \"./constants/date-fns/constants\";\n *\n * const isValid = 8640000000000001 <= maxTime;\n * //=> false\n *\n * new Date(8640000000000001);\n * //=> Invalid Date\n */\nexport const maxTime = Math.pow(10, 8) * 24 * 60 * 60 * 1000;\n\n/**\n * @constant\n * @name minTime\n * @summary Minimum allowed time.\n *\n * @example\n * import { minTime } from \"./constants/date-fns/constants\";\n *\n * const isValid = -8640000000000001 >= minTime;\n * //=> false\n *\n * new Date(-8640000000000001)\n * //=> Invalid Date\n */\nexport const minTime = -maxTime;\n\n/**\n * @constant\n * @name millisecondsInWeek\n * @summary Milliseconds in 1 week.\n */\nexport const millisecondsInWeek = 604800000;\n\n/**\n * @constant\n * @name millisecondsInDay\n * @summary Milliseconds in 1 day.\n */\nexport const millisecondsInDay = 86400000;\n\n/**\n * @constant\n * @name millisecondsInMinute\n * @summary Milliseconds in 1 minute\n */\nexport const millisecondsInMinute = 60000;\n\n/**\n * @constant\n * @name millisecondsInHour\n * @summary Milliseconds in 1 hour\n */\nexport const millisecondsInHour = 3600000;\n\n/**\n * @constant\n * @name millisecondsInSecond\n * @summary Milliseconds in 1 second\n */\nexport const millisecondsInSecond = 1000;\n\n/**\n * @constant\n * @name minutesInYear\n * @summary Minutes in 1 year.\n */\nexport const minutesInYear = 525600;\n\n/**\n * @constant\n * @name minutesInMonth\n * @summary Minutes in 1 month.\n */\nexport const minutesInMonth = 43200;\n\n/**\n * @constant\n * @name minutesInDay\n * @summary Minutes in 1 day.\n */\nexport const minutesInDay = 1440;\n\n/**\n * @constant\n * @name minutesInHour\n * @summary Minutes in 1 hour.\n */\nexport const minutesInHour = 60;\n\n/**\n * @constant\n * @name monthsInQuarter\n * @summary Months in 1 quarter.\n */\nexport const monthsInQuarter = 3;\n\n/**\n * @constant\n * @name monthsInYear\n * @summary Months in 1 year.\n */\nexport const monthsInYear = 12;\n\n/**\n * @constant\n * @name quartersInYear\n * @summary Quarters in 1 year\n */\nexport const quartersInYear = 4;\n\n/**\n * @constant\n * @name secondsInHour\n * @summary Seconds in 1 hour.\n */\nexport const secondsInHour = 3600;\n\n/**\n * @constant\n * @name secondsInMinute\n * @summary Seconds in 1 minute.\n */\nexport const secondsInMinute = 60;\n\n/**\n * @constant\n * @name secondsInDay\n * @summary Seconds in 1 day.\n */\nexport const secondsInDay = secondsInHour * 24;\n\n/**\n * @constant\n * @name secondsInWeek\n * @summary Seconds in 1 week.\n */\nexport const secondsInWeek = secondsInDay * 7;\n\n/**\n * @constant\n * @name secondsInYear\n * @summary Seconds in 1 year.\n */\nexport const secondsInYear = secondsInDay * daysInYear;\n\n/**\n * @constant\n * @name secondsInMonth\n * @summary Seconds in 1 month\n */\nexport const secondsInMonth = secondsInYear / 12;\n\n/**\n * @constant\n * @name secondsInQuarter\n * @summary Seconds in 1 quarter.\n */\nexport const secondsInQuarter = secondsInMonth * 3;\n\n/**\n * @constant\n * @name constructFromSymbol\n * @summary Symbol enabling Date extensions to inherit properties from the reference date.\n *\n * The symbol is used to enable the `constructFrom` function to construct a date\n * using a reference date and a value. It allows to transfer extra properties\n * from the reference date to the new date. It's useful for extensions like\n * [`TZDate`](https://github.com/date-fns/tz) that accept a time zone as\n * a constructor argument.\n */\nexport const constructFromSymbol = Symbol.for(\"constructDateFrom\");\n","import { constructFromSymbol } from \"./constants.js\";\n\n/**\n * @name constructFrom\n * @category Generic Helpers\n * @summary Constructs a date using the reference date and the value\n *\n * @description\n * The function constructs a new date using the constructor from the reference\n * date and the given value. It helps to build generic functions that accept\n * date extensions.\n *\n * It defaults to `Date` if the passed reference date is a number or a string.\n *\n * Starting from v3.7.0, it allows to construct a date using `[Symbol.for(\"constructDateFrom\")]`\n * enabling to transfer extra properties from the reference date to the new date.\n * It's useful for extensions like [`TZDate`](https://github.com/date-fns/tz)\n * that accept a time zone as a constructor argument.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The reference date to take constructor from\n * @param value - The value to create the date\n *\n * @returns Date initialized using the given date and value\n *\n * @example\n * import { constructFrom } from \"./constructFrom/date-fns\";\n *\n * // A function that clones a date preserving the original type\n * function cloneDate<DateType extends Date>(date: DateType): DateType {\n *   return constructFrom(\n *     date, // Use constructor from the given date\n *     date.getTime() // Use the date value to create a new date\n *   );\n * }\n */\nexport function constructFrom(date, value) {\n  if (typeof date === \"function\") return date(value);\n\n  if (date && typeof date === \"object\" && constructFromSymbol in date)\n    return date[constructFromSymbol](value);\n\n  if (date instanceof Date) return new date.constructor(value);\n\n  return new Date(value);\n}\n\n// Fallback for modularized imports:\nexport default constructFrom;\n","import { constructFrom } from \"./constructFrom.js\";\n\n/**\n * @name toDate\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If the argument is none of the above, the function returns Invalid Date.\n *\n * Starting from v3.7.0, it clones a date using `[Symbol.for(\"constructDateFrom\")]`\n * enabling to transfer extra properties from the reference date to the new date.\n * It's useful for extensions like [`TZDate`](https://github.com/date-fns/tz)\n * that accept a time zone as a constructor argument.\n *\n * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param argument - The value to convert\n *\n * @returns The parsed date in the local time zone\n *\n * @example\n * // Clone the date:\n * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert the timestamp to date:\n * const result = toDate(1392098430000)\n * //=> Tue Feb 11 2014 11:30:30\n */\nexport function toDate(argument, context) {\n  // [TODO] Get rid of `toDate` or `constructFrom`?\n  return constructFrom(context || argument, argument);\n}\n\n// Fallback for modularized imports:\nexport default toDate;\n","import { constructFrom } from \"./constructFrom.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link addDays} function options.\n */\n\n/**\n * @name addDays\n * @category Day Helpers\n * @summary Add the specified number of days to the given date.\n *\n * @description\n * Add the specified number of days to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of days to be added.\n * @param options - An object with options\n *\n * @returns The new date with the days added\n *\n * @example\n * // Add 10 days to 1 September 2014:\n * const result = addDays(new Date(2014, 8, 1), 10)\n * //=> Thu Sep 11 2014 00:00:00\n */\nexport function addDays(date, amount, options) {\n  const _date = toDate(date, options?.in);\n  if (isNaN(amount)) return constructFrom(options?.in || date, NaN);\n\n  // If 0 days, no-op to avoid changing times in the hour before end of DST\n  if (!amount) return _date;\n\n  _date.setDate(_date.getDate() + amount);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default addDays;\n","import { addDays } from \"./addDays.js\";\n\n/**\n * The {@link subDays} function options.\n */\n\n/**\n * @name subDays\n * @category Day Helpers\n * @summary Subtract the specified number of days from the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of days to be subtracted.\n * @param options - An object with options\n *\n * @returns The new date with the days subtracted\n *\n * @example\n * // Subtract 10 days from 1 September 2014:\n * const result = subDays(new Date(2014, 8, 1), 10)\n * //=> Fri Aug 22 2014 00:00:00\n */\nexport function subDays(date, amount, options) {\n  return addDays(date, -amount, options);\n}\n\n// Fallback for modularized imports:\nexport default subDays;\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","import type { ReactNode } from \"react\";\r\nimport clsx from \"clsx\";\r\n\r\ninterface CardProps {\r\n  title?: string;\r\n  description?: string;\r\n  className?: string;\r\n  children: ReactNode;\r\n  actions?: ReactNode;\r\n}\r\n\r\nexport function Card({ title, description, className, children, actions }: CardProps) {\r\n  return (\r\n    <section className={clsx(\"card p-6 space-y-4\", className)}>\r\n      {(title || description || actions) && (\r\n        <header className=\"flex flex-wrap items-center justify-between gap-4\">\r\n          <div>\r\n            {title ? <h3 className=\"text-lg font-semibold text-slate-900\">{title}</h3> : null}\r\n            {description ? <p className=\"text-sm text-slate-500\">{description}</p> : null}\r\n          </div>\r\n          {actions}\r\n        </header>\r\n      )}\r\n      <div>{children}</div>\r\n    </section>\r\n  );\r\n}\r\n\r\n","import type { ReactNode } from \"react\";\r\nimport clsx from \"clsx\";\r\n\r\ninterface PageHeaderProps {\r\n  eyebrow?: string;\r\n  title: string;\r\n  description?: string;\r\n  actions?: ReactNode;\r\n  children?: ReactNode;\r\n  className?: string;\r\n}\r\n\r\nexport function PageHeader({ eyebrow, title, description, actions, children, className }: PageHeaderProps) {\r\n  return (\r\n    <section\r\n      className={clsx(\r\n        \"relative overflow-hidden rounded-[32px] border border-white/60 bg-white/80 p-6 shadow-[0px_25px_60px_rgba(15,23,42,0.08)] backdrop-blur\",\r\n        className\r\n      )}\r\n    >\r\n      <div className=\"pointer-events-none absolute inset-0\">\r\n        <div className=\"absolute -top-16 -right-8 h-48 w-48 rounded-full bg-brand/15 blur-3xl\" />\r\n        <div className=\"absolute bottom-[-60px] left-[-40px] h-44 w-44 rounded-full bg-accent/10 blur-3xl\" />\r\n      </div>\r\n      <div className=\"relative z-10 flex flex-wrap items-start gap-6\">\r\n        <div className=\"space-y-3\">\r\n          {eyebrow ? (\r\n            <span className=\"inline-flex items-center rounded-full border border-slate-100/70 bg-slate-50/80 px-3 py-1 text-xs font-semibold uppercase tracking-[0.16em] text-slate-500\">\r\n              {eyebrow}\r\n            </span>\r\n          ) : null}\r\n          <div>\r\n            <h1 className=\"text-3xl font-semibold leading-tight text-slate-900\">{title}</h1>\r\n            {description ? <p className=\"mt-2 max-w-3xl text-sm text-slate-600\">{description}</p> : null}\r\n          </div>\r\n        </div>\r\n        {actions ? <div className=\"ml-auto flex flex-col items-stretch gap-3\">{actions}</div> : null}\r\n      </div>\r\n      {children ? <div className=\"relative z-10 mt-6\">{children}</div> : null}\r\n    </section>\r\n  );\r\n}\r\n\r\ninterface PageHeaderMetaProps {\r\n  items: Array<{\r\n    label: string;\r\n    value: string;\r\n    helper?: string;\r\n  }>;\r\n  columns?: number;\r\n}\r\n\r\nexport function PageHeaderMeta({ items, columns = 3 }: PageHeaderMetaProps) {\r\n  return (\r\n    <div\r\n      className={clsx(\r\n        \"grid gap-4 text-sm text-slate-600\",\r\n        columns === 2 ? \"sm:grid-cols-2\" : columns === 4 ? \"sm:grid-cols-2 lg:grid-cols-4\" : \"sm:grid-cols-3\"\r\n      )}\r\n    >\r\n      {items.map((item) => (\r\n        <div\r\n          key={`${item.label}-${item.value}`}\r\n          className=\"rounded-2xl border border-slate-100/70 bg-white/90 px-4 py-3 shadow-inner shadow-slate-200/70\"\r\n        >\r\n          <p className=\"text-xs font-semibold uppercase tracking-wide text-slate-500\">{item.label}</p>\r\n          <p className=\"mt-1 text-base font-semibold text-slate-900\">{item.value}</p>\r\n          {item.helper ? <p className=\"mt-0.5 text-xs text-slate-500\">{item.helper}</p> : null}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n","export function formatCurrency(value: number, currency = 'USD', maximumFractionDigits = 0) {\r\n  return new Intl.NumberFormat('en-US', {\r\n    style: 'currency',\r\n    currency,\r\n    maximumFractionDigits\r\n  }).format(value);\r\n}\r\n\r\nexport function formatNumber(value: number, maximumFractionDigits = 0) {\r\n  return new Intl.NumberFormat('en-US', {\r\n    maximumFractionDigits\r\n  }).format(value);\r\n}\r\n\r\nexport function formatPercent(value: number, maximumFractionDigits = 1) {\r\n  return new Intl.NumberFormat('en-US', {\r\n    style: 'percent',\r\n    maximumFractionDigits\r\n  }).format(value);\r\n}\r\n\r\nexport function formatDate(date: Date | string, options: Intl.DateTimeFormatOptions = { month: 'short', day: 'numeric', year: 'numeric' }) {\r\n  const dt = typeof date === 'string' ? new Date(date) : date;\r\n  return new Intl.DateTimeFormat('en-US', options).format(dt);\r\n}\r\n\r\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfDay} function options.\n */\n\n/**\n * @name startOfDay\n * @category Day Helpers\n * @summary Return the start of a day for the given date.\n *\n * @description\n * Return the start of a day for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - The options\n *\n * @returns The start of a day\n *\n * @example\n * // The start of a day for 2 September 2014 11:55:00:\n * const result = startOfDay(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 02 2014 00:00:00\n */\nexport function startOfDay(date, options) {\n  const _date = toDate(date, options?.in);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfDay;\n","import type { ReactNode } from \"react\";\r\nimport clsx from \"clsx\";\r\n\r\ninterface TableProps {\r\n  children: ReactNode;\r\n  className?: string;\r\n}\r\n\r\ninterface TableCellProps {\r\n  children: ReactNode;\r\n  align?: \"left\" | \"center\" | \"right\";\r\n  className?: string;\r\n}\r\n\r\nexport function Table({ children, className }: TableProps) {\r\n  return <table className={clsx(\"min-w-full divide-y divide-slate-200\", className)}>{children}</table>;\r\n}\r\n\r\nexport function THead({ children }: { children: ReactNode }) {\r\n  return (\r\n    <thead className=\"bg-slate-50\">\r\n      <tr className=\"text-xs font-semibold uppercase tracking-wider text-slate-500\">{children}</tr>\r\n    </thead>\r\n  );\r\n}\r\n\r\nexport function TBody({ children }: { children: ReactNode }) {\r\n  return <tbody className=\"divide-y divide-slate-100 bg-white text-sm text-slate-700\">{children}</tbody>;\r\n}\r\n\r\nexport function TH({ children, align = \"left\", className }: TableCellProps) {\r\n  return (\r\n    <th\r\n      scope=\"col\"\r\n      className={clsx(\r\n        \"px-4 py-3\",\r\n        {\r\n          \"text-left\": align === \"left\",\r\n          \"text-center\": align === \"center\",\r\n          \"text-right\": align === \"right\"\r\n        },\r\n        className\r\n      )}\r\n    >\r\n      {children}\r\n    </th>\r\n  );\r\n}\r\n\r\nexport function TD({ children, align = \"left\", className }: TableCellProps) {\r\n  return (\r\n    <td\r\n      className={clsx(\r\n        \"px-4 py-3\",\r\n        {\r\n          \"text-left\": align === \"left\",\r\n          \"text-center\": align === \"center\",\r\n          \"text-right\": align === \"right\"\r\n        },\r\n        className\r\n      )}\r\n    >\r\n      {children}\r\n    </td>\r\n  );\r\n}\r\n\r\n","import { subDays } from 'date-fns';\r\n\r\nimport { getSessionsOverTime, getSummaryMetrics, getTopPages } from '@/lib/ga4';\r\n\r\nexport interface AnalyticsFilters {\r\n  from: Date;\r\n  to: Date;\r\n}\r\n\r\nexport function defaultAnalyticsFilters(): AnalyticsFilters {\r\n  const to = new Date();\r\n  return {\r\n    from: subDays(to, 30),\r\n    to\r\n  };\r\n}\r\n\r\nexport async function getAnalyticsData(filters: AnalyticsFilters) {\r\n  const [summary, sessionsSeries, topPages] = await Promise.all([\r\n    getSummaryMetrics(filters),\r\n    getSessionsOverTime({ ...filters, granularity: 'DAILY' }),\r\n    getTopPages(filters)\r\n  ]);\r\n\r\n  return {\r\n    summary,\r\n    sessionsSeries,\r\n    topPages\r\n  };\r\n}\r\n\r\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const BarChartComponent = registerClientReference(\n    function() { throw new Error(\"Attempted to call BarChartComponent() from the server but BarChartComponent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/charts/bar-chart.tsx\",\n    \"BarChartComponent\",\n);\n","import { EventStatus, Prisma } from '@prisma/client';\r\nimport { addDays, startOfDay, subDays } from 'date-fns';\r\n\r\nimport { prisma } from '@/lib/prisma';\r\n\r\nconst toNumber = (value?: Prisma.Decimal | null) => Number(value ?? 0);\r\n\r\nexport interface EventFilters {\r\n  from?: Date;\r\n  to?: Date;\r\n}\r\n\r\nexport interface EventsPageData {\r\n  events: Array<{\r\n    id: string;\r\n    name: string;\r\n    startDate: Date;\r\n    endDate: Date;\r\n    venue?: string | null;\r\n    status: EventStatus;\r\n    ticketsSold: number;\r\n    ticketsTotal: number;\r\n    grossRevenue: number;\r\n    netRevenue: number;\r\n  }>;\r\n  summary: {\r\n    upcomingEvents: number;\r\n    pastEvents: number;\r\n    ticketsSold: number;\r\n    grossRevenue: number;\r\n    netRevenue: number;\r\n  };\r\n  charts: {\r\n    ticketsPerEvent: Array<{ name: string; tickets: number }>;\r\n    revenuePerEvent: Array<{ name: string; gross: number; net: number }>;\r\n  };\r\n}\r\n\r\nfunction buildWhere(filters: EventFilters) {\r\n  if (!filters.from && !filters.to) {\r\n    return {};\r\n  }\r\n  const where: Prisma.EventWhereInput = {};\r\n  if (filters.from || filters.to) {\r\n    where.startDate = {\r\n      ...(filters.from ? { gte: filters.from } : {}),\r\n      ...(filters.to ? { lte: filters.to } : {})\r\n    };\r\n  }\r\n  return where;\r\n}\r\n\r\nexport async function getEventsData(filters: EventFilters = {}): Promise<EventsPageData> {\r\n  const where = buildWhere(filters);\r\n\r\n  try {\r\n    const eventRecords = await prisma.event.findMany({\r\n      where,\r\n      orderBy: { startDate: 'desc' }\r\n    });\r\n\r\n    const events = eventRecords.map((event) => ({\r\n      ...event,\r\n      grossRevenue: toNumber(event.grossRevenue),\r\n      netRevenue: toNumber(event.netRevenue)\r\n    }));\r\n\r\n    const now = new Date();\r\n    const upcomingEvents = events.filter((event) => event.startDate >= now).length;\r\n    const pastEvents = events.length - upcomingEvents;\r\n    const ticketsSold = events.reduce((sum, event) => sum + event.ticketsSold, 0);\r\n    const grossRevenue = events.reduce<number>((sum, event) => sum + Number(event.grossRevenue ?? 0), 0);\r\n    const netRevenue = events.reduce<number>((sum, event) => sum + Number(event.netRevenue ?? 0), 0);\r\n\r\n    return {\r\n      events,\r\n      summary: {\r\n        upcomingEvents,\r\n        pastEvents,\r\n        ticketsSold,\r\n        grossRevenue,\r\n        netRevenue\r\n      },\r\n      charts: {\r\n        ticketsPerEvent: events.map((event) => ({ name: event.name, tickets: event.ticketsSold })),\r\n        revenuePerEvent: events.map((event) => ({\r\n          name: event.name,\r\n          gross: Number(event.grossRevenue ?? 0),\r\n          net: Number(event.netRevenue ?? 0)\r\n        }))\r\n      }\r\n    };\r\n  } catch (error) {\r\n    console.warn('Unable to load events data, returning empty snapshot', error instanceof Error ? error.message : error);\r\n    return buildFallbackEventsData();\r\n  }\r\n}\r\n\r\nfunction buildFallbackEventsData(): EventsPageData {\r\n  return {\r\n    events: [],\r\n    summary: {\r\n      upcomingEvents: 0,\r\n      pastEvents: 0,\r\n      ticketsSold: 0,\r\n      grossRevenue: 0,\r\n      netRevenue: 0\r\n    },\r\n    charts: {\r\n      ticketsPerEvent: [],\r\n      revenuePerEvent: []\r\n    }\r\n  };\r\n}\r\n\r\nexport function defaultEventFilters(): EventFilters {\r\n  return {\r\n    from: subDays(startOfDay(new Date()), 90),\r\n    to: addDays(startOfDay(new Date()), 180)\r\n  };\r\n}\r\n\r\n","import { constructFrom } from \"./constructFrom.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link addMonths} function options.\n */\n\n/**\n * @name addMonths\n * @category Month Helpers\n * @summary Add the specified number of months to the given date.\n *\n * @description\n * Add the specified number of months to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of months to be added.\n * @param options - The options object\n *\n * @returns The new date with the months added\n *\n * @example\n * // Add 5 months to 1 September 2014:\n * const result = addMonths(new Date(2014, 8, 1), 5)\n * //=> Sun Feb 01 2015 00:00:00\n *\n * // Add one month to 30 January 2023:\n * const result = addMonths(new Date(2023, 0, 30), 1)\n * //=> Tue Feb 28 2023 00:00:00\n */\nexport function addMonths(date, amount, options) {\n  const _date = toDate(date, options?.in);\n  if (isNaN(amount)) return constructFrom(options?.in || date, NaN);\n  if (!amount) {\n    // If 0 months, no-op to avoid changing times in the hour before end of DST\n    return _date;\n  }\n  const dayOfMonth = _date.getDate();\n\n  // The JS Date object supports date math by accepting out-of-bounds values for\n  // month, day, etc. For example, new Date(2020, 0, 0) returns 31 Dec 2019 and\n  // new Date(2020, 13, 1) returns 1 Feb 2021.  This is *almost* the behavior we\n  // want except that dates will wrap around the end of a month, meaning that\n  // new Date(2020, 13, 31) will return 3 Mar 2021 not 28 Feb 2021 as desired. So\n  // we'll default to the end of the desired month by adding 1 to the desired\n  // month and using a date of 0 to back up one day to the end of the desired\n  // month.\n  const endOfDesiredMonth = constructFrom(options?.in || date, _date.getTime());\n  endOfDesiredMonth.setMonth(_date.getMonth() + amount + 1, 0);\n  const daysInMonth = endOfDesiredMonth.getDate();\n  if (dayOfMonth >= daysInMonth) {\n    // If we're already at the end of the month, then this is the correct date\n    // and we're done.\n    return endOfDesiredMonth;\n  } else {\n    // Otherwise, we now know that setting the original day-of-month value won't\n    // cause an overflow, so set the desired day-of-month. Note that we can't\n    // just set the date of `endOfDesiredMonth` because that object may have had\n    // its time changed in the unusual case where where a DST transition was on\n    // the last day of the month and its local time was in the hour skipped or\n    // repeated next to a DST transition.  So we use `date` instead which is\n    // guaranteed to still have the original time.\n    _date.setFullYear(\n      endOfDesiredMonth.getFullYear(),\n      endOfDesiredMonth.getMonth(),\n      dayOfMonth,\n    );\n    return _date;\n  }\n}\n\n// Fallback for modularized imports:\nexport default addMonths;\n","import { addMonths } from \"./addMonths.js\";\n\n/**\n * The subMonths function options.\n */\n\n/**\n * @name subMonths\n * @category Month Helpers\n * @summary Subtract the specified number of months from the given date.\n *\n * @description\n * Subtract the specified number of months from the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of months to be subtracted.\n * @param options - An object with options\n *\n * @returns The new date with the months subtracted\n *\n * @example\n * // Subtract 5 months from 1 February 2015:\n * const result = subMonths(new Date(2015, 1, 1), 5)\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function subMonths(date, amount, options) {\n  return addMonths(date, -amount, options);\n}\n\n// Fallback for modularized imports:\nexport default subMonths;\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfMonth} function options.\n */\n\n/**\n * @name startOfMonth\n * @category Month Helpers\n * @summary Return the start of a month for the given date.\n *\n * @description\n * Return the start of a month for the given date. The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments.\n * Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed,\n * or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of a month\n *\n * @example\n * // The start of a month for 2 September 2014 11:55:00:\n * const result = startOfMonth(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function startOfMonth(date, options) {\n  const _date = toDate(date, options?.in);\n  _date.setDate(1);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfMonth;\n","import { format, startOfMonth, endOfMonth, subMonths } from 'date-fns';\r\n\r\nexport interface MonthlyBucket {\r\n  key: string;\r\n  label: string;\r\n  start: Date;\r\n  end: Date;\r\n}\r\n\r\nexport function getMonthlyBuckets(months = 12, anchor: Date = new Date()): MonthlyBucket[] {\r\n  const buckets: MonthlyBucket[] = [];\r\n  const anchorStart = startOfMonth(anchor);\r\n\r\n  for (let i = months - 1; i >= 0; i -= 1) {\r\n    const start = subMonths(anchorStart, i);\r\n    buckets.push({\r\n      key: format(start, 'yyyy-MM'),\r\n      label: format(start, 'MMM yy'),\r\n      start,\r\n      end: endOfMonth(start)\r\n    });\r\n  }\r\n\r\n  return buckets;\r\n}\r\n\r\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link endOfMonth} function options.\n */\n\n/**\n * @name endOfMonth\n * @category Month Helpers\n * @summary Return the end of a month for the given date.\n *\n * @description\n * Return the end of a month for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The end of a month\n *\n * @example\n * // The end of a month for 2 September 2014 11:55:00:\n * const result = endOfMonth(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 30 2014 23:59:59.999\n */\nexport function endOfMonth(date, options) {\n  const _date = toDate(date, options?.in);\n  const month = _date.getMonth();\n  _date.setFullYear(_date.getFullYear(), month + 1, 0);\n  _date.setHours(23, 59, 59, 999);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default endOfMonth;\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const PieChartComponent = registerClientReference(\n    function() { throw new Error(\"Attempted to call PieChartComponent() from the server but PieChartComponent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/charts/pie-chart.tsx\",\n    \"PieChartComponent\",\n);\n","import { Prisma } from '@prisma/client';\r\nimport { startOfMonth, subDays, subMonths } from 'date-fns';\r\n\r\nimport { prisma } from '@/lib/prisma';\r\nimport { getMonthlyBuckets, type MonthlyBucket } from '@/lib/time-series';\r\n\r\nconst toNumber = (value?: Prisma.Decimal | null) => Number(value ?? 0);\r\n\r\nexport interface DonorFilters {\r\n  query?: string;\r\n  minTotalGiven?: number;\r\n  lastGiftFrom?: Date;\r\n  lastGiftTo?: Date;\r\n}\r\n\r\nexport interface DonorListResult {\r\n  donors: Array<{\r\n    id: string;\r\n    name: string;\r\n    email?: string | null;\r\n    phone?: string | null;\r\n    totalPledged: number;\r\n    totalGiven: number;\r\n    lastGiftDate?: Date | null;\r\n  }>;\r\n  pagination: {\r\n    page: number;\r\n    pageSize: number;\r\n    total: number;\r\n    totalPages: number;\r\n  };\r\n  summary: {\r\n    totalDonors: number;\r\n    activeDonors: number;\r\n    averageLifetimeValue: number;\r\n  };\r\n  charts: {\r\n    acquisitions: Array<{ label: string; value: number }>;\r\n    giftDistribution: Array<{ name: string; value: number }>;\r\n  };\r\n}\r\n\r\nexport async function getDonorList(params: DonorFilters & { page: number; pageSize: number }): Promise<DonorListResult> {\r\n  const { page, pageSize, query, minTotalGiven, lastGiftFrom, lastGiftTo } = params;\r\n  const where: Prisma.DonorWhereInput = {};\r\n  const giftRanges = [\r\n    { name: '< $1k', min: 0, max: 1000 },\r\n    { name: '$1k - $5k', min: 1000, max: 5000 },\r\n    { name: '$5k - $10k', min: 5000, max: 10000 },\r\n    { name: '$10k+', min: 10000, max: Infinity }\r\n  ];\r\n  const acquisitionBuckets = getMonthlyBuckets(12);\r\n\r\n  if (query) {\r\n    where.OR = [\r\n      { name: { contains: query, mode: 'insensitive' } },\r\n      { email: { contains: query, mode: 'insensitive' } }\r\n    ];\r\n  }\r\n\r\n  if (minTotalGiven) {\r\n    where.totalGiven = { gte: minTotalGiven };\r\n  }\r\n\r\n  if (lastGiftFrom || lastGiftTo) {\r\n    where.lastGiftDate = {};\r\n    if (lastGiftFrom) {\r\n      where.lastGiftDate.gte = lastGiftFrom;\r\n    }\r\n    if (lastGiftTo) {\r\n      where.lastGiftDate.lte = lastGiftTo;\r\n    }\r\n  }\r\n\r\n  try {\r\n    const [totalMatching, donors, totalDonors, activeDonors, averageLifetimeValue, acquisitionSource, lifetimeValues] = await Promise.all([\r\n      prisma.donor.count({ where }),\r\n      prisma.donor.findMany({\r\n        where,\r\n        orderBy: { totalGiven: 'desc' },\r\n        take: pageSize,\r\n        skip: (page - 1) * pageSize,\r\n        select: {\r\n          id: true,\r\n          name: true,\r\n          email: true,\r\n          phone: true,\r\n          totalGiven: true,\r\n          totalPledged: true,\r\n          lastGiftDate: true\r\n        }\r\n      }),\r\n      prisma.donor.count(),\r\n      prisma.donor.count({ where: { lastGiftDate: { gte: subDays(new Date(), 365) } } }),\r\n      prisma.donor.aggregate({ _avg: { totalGiven: true } }),\r\n      prisma.donor.findMany({\r\n        where: { createdAt: { gte: subMonths(startOfMonth(new Date()), 11) } },\r\n        select: { createdAt: true }\r\n      }),\r\n      prisma.donor.findMany({ select: { totalGiven: true } })\r\n    ]);\r\n\r\n    const formattedDonors = donors.map((donor) => ({\r\n      ...donor,\r\n      totalGiven: toNumber(donor.totalGiven),\r\n      totalPledged: toNumber(donor.totalPledged)\r\n    }));\r\n\r\n    const acquisitions = acquisitionBuckets.map((bucket) => ({\r\n      label: bucket.label,\r\n      value: acquisitionSource.filter((entry) => entry.createdAt >= bucket.start && entry.createdAt <= bucket.end).length\r\n    }));\r\n\r\n    const giftDistribution = giftRanges.map((range) => ({\r\n      name: range.name,\r\n      value: lifetimeValues.filter((value) => {\r\n        const amount = toNumber(value.totalGiven);\r\n        return amount >= range.min && amount < range.max;\r\n      }).length\r\n    }));\r\n\r\n    return {\r\n      donors: formattedDonors,\r\n      pagination: {\r\n        page,\r\n        pageSize,\r\n        total: totalMatching,\r\n        totalPages: Math.max(1, Math.ceil(totalMatching / pageSize))\r\n      },\r\n      summary: {\r\n        totalDonors,\r\n        activeDonors,\r\n        averageLifetimeValue: toNumber(averageLifetimeValue._avg.totalGiven)\r\n      },\r\n      charts: {\r\n        acquisitions,\r\n        giftDistribution\r\n      }\r\n    };\r\n  } catch (error) {\r\n    console.error('Failed to load donor list data. Serving fallback dataset.', error);\r\n    return buildFallbackDonorList({\r\n      page,\r\n      pageSize,\r\n      acquisitionBuckets,\r\n      giftRanges\r\n    });\r\n  }\r\n}\r\n\r\nfunction buildFallbackDonorList({\r\n  page,\r\n  pageSize,\r\n  acquisitionBuckets,\r\n  giftRanges\r\n}: {\r\n  page: number;\r\n  pageSize: number;\r\n  acquisitionBuckets: MonthlyBucket[];\r\n  giftRanges: Array<{ name: string }>;\r\n}): DonorListResult {\r\n  return {\r\n    donors: [],\r\n    pagination: {\r\n      page,\r\n      pageSize,\r\n      total: 0,\r\n      totalPages: 1\r\n    },\r\n    summary: {\r\n      totalDonors: 0,\r\n      activeDonors: 0,\r\n      averageLifetimeValue: 0\r\n    },\r\n    charts: {\r\n      acquisitions: acquisitionBuckets.map((bucket) => ({ label: bucket.label, value: 0 })),\r\n      giftDistribution: giftRanges.map((range) => ({ name: range.name, value: 0 }))\r\n    }\r\n  };\r\n}\r\n\r\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const InsightsReportButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call InsightsReportButton() from the server but InsightsReportButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/(dashboard)/insights/_components/insights-report-button.tsx\",\n    \"InsightsReportButton\",\n);\n","import { Card } from '@/components/ui/card';\r\nimport { Table, TBody, TD, TH, THead } from '@/components/ui/table';\r\nimport { PageHeader, PageHeaderMeta } from '@/components/layout/page-header';\r\nimport { TimeSeriesChart } from '@/components/charts/time-series-chart';\r\nimport { BarChartComponent } from '@/components/charts/bar-chart';\r\nimport { PieChartComponent } from '@/components/charts/pie-chart';\r\nimport { formatCurrency, formatDate, formatNumber, formatPercent } from '@/lib/format';\r\nimport { getInsightsData } from '@/lib/insights-data';\r\nimport { InsightsReportButton } from '@/app/(dashboard)/insights/_components/insights-report-button';\r\n\r\nexport const dynamic = 'force-dynamic';\r\n\r\nfunction formatMomentum(value: number) {\r\n  if (!Number.isFinite(value) || value === 0) return 'vs prior period';\r\n  const sign = value > 0 ? '+' : '';\r\n  return `${sign}${(value * 100).toFixed(1)} pts vs prior period`;\r\n}\r\n\r\nconst impactStyles: Record<string, string> = {\r\n  positive: 'border-green-200 bg-green-50 text-green-900',\r\n  negative: 'border-red-200 bg-red-50 text-red-900',\r\n  neutral: 'border-slate-200 bg-white text-slate-700'\r\n};\r\n\r\nexport default async function InsightsPage() {\r\n  const data = await getInsightsData();\r\n\r\n  const summaryItems = [\r\n    {\r\n      label: 'Funds raised (YTD)',\r\n      value: formatCurrency(data.dashboard.kpis.fundsYtd),\r\n      helper: formatMomentum(data.metrics.fundsMomentum)\r\n    },\r\n    {\r\n      label: 'Active donors',\r\n      value: formatNumber(data.dashboard.kpis.activeDonors),\r\n      helper: `${formatNumber(data.donors.summary.totalDonors)} total`\r\n    },\r\n    {\r\n      label: 'Tickets sold',\r\n      value: formatNumber(data.dashboard.kpis.ticketsSold),\r\n      helper: `${formatPercent(data.metrics.avgOccupancy, 0)} avg capacity`\r\n    },\r\n    {\r\n      label: 'Sessions (30d)',\r\n      value: formatNumber(data.dashboard.kpis.sessionsLast30Days),\r\n      helper: formatMomentum(data.metrics.sessionsMomentum)\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <PageHeader\r\n        eyebrow=\"Intelligence\"\r\n        title=\"Integrated insights\"\r\n        description=\"Unified dashboard for revenue, donor, event, and digital performance.\"\r\n        actions={<InsightsReportButton />}\r\n      >\r\n        <PageHeaderMeta items={summaryItems} columns={4} />\r\n      </PageHeader>\r\n\r\n      <Card title=\"Insight highlights\" description=\"Auto-generated observations from merged datasets.\">\r\n        <div className=\"grid gap-4 md:grid-cols-2\">\r\n          {data.highlights.map((highlight) => (\r\n            <div\r\n              key={highlight.title}\r\n              className={`rounded-2xl border p-4 shadow-sm transition ${impactStyles[highlight.impact] ?? impactStyles.neutral}`}\r\n            >\r\n              <p className=\"text-sm font-semibold\">{highlight.title}</p>\r\n              <p className=\"mt-2 text-sm leading-6\">{highlight.description}</p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </Card>\r\n\r\n      <Card\r\n        title=\"Monthly performance\"\r\n        description=\"Funds raised, tickets sold, and website sessions across the last 12 months.\"\r\n      >\r\n        <TimeSeriesChart\r\n          data={data.dashboard.charts.monthly}\r\n          lines={[\r\n            { dataKey: 'funds', color: '#0f172a', name: 'Funds raised ($)' },\r\n            { dataKey: 'tickets', color: '#2563eb', name: 'Tickets sold' },\r\n            { dataKey: 'sessions', color: '#059669', name: 'Sessions' }\r\n          ]}\r\n        />\r\n      </Card>\r\n\r\n      <section className=\"grid gap-6 lg:grid-cols-2\">\r\n        <Card\r\n          title=\"Top donors\"\r\n          description=\"Highest lifetime value donors with most recent gift date.\"\r\n          actions={<p className=\"text-xs text-slate-500\">Avg lifetime value {formatCurrency(data.donors.summary.averageLifetimeValue)}</p>}\r\n        >\r\n          <div className=\"overflow-x-auto\">\r\n            <Table>\r\n              <THead>\r\n                <TH>Name</TH>\r\n                <TH>Email</TH>\r\n                <TH>Lifetime given</TH>\r\n                <TH>Last gift</TH>\r\n              </THead>\r\n              <TBody>\r\n                {data.donors.donors.map((donor) => (\r\n                  <tr key={donor.id}>\r\n                    <TD className=\"font-semibold text-slate-900\">{donor.name}</TD>\r\n                    <TD>{donor.email ?? '—'}</TD>\r\n                    <TD>{formatCurrency(donor.totalGiven)}</TD>\r\n                    <TD>{donor.lastGiftDate ? formatDate(donor.lastGiftDate) : 'No gifts'}</TD>\r\n                  </tr>\r\n                ))}\r\n              </TBody>\r\n            </Table>\r\n          </div>\r\n        </Card>\r\n\r\n        <Card\r\n          title=\"Event performance snapshot\"\r\n          description=\"Most recent Eventbrite programs with revenue and capacity details.\"\r\n          actions={<p className=\"text-xs text-slate-500\">{formatNumber(data.events.data.summary.upcomingEvents)} upcoming · {formatNumber(data.events.data.summary.pastEvents)} past</p>}\r\n        >\r\n          <div className=\"overflow-x-auto\">\r\n            <Table>\r\n              <THead>\r\n                <TH>Name</TH>\r\n                <TH>Dates</TH>\r\n                <TH>Tickets</TH>\r\n                <TH>Capacity</TH>\r\n                <TH>Gross revenue</TH>\r\n              </THead>\r\n              <TBody>\r\n                {data.events.data.events.slice(0, 5).map((event) => (\r\n                  <tr key={event.id}>\r\n                    <TD className=\"font-semibold text-slate-900\">{event.name}</TD>\r\n                    <TD className=\"text-sm text-slate-600\">\r\n                      {formatDate(event.startDate)} – {formatDate(event.endDate)}\r\n                    </TD>\r\n                    <TD>{formatNumber(event.ticketsSold)}</TD>\r\n                    <TD>\r\n                      {formatNumber(event.ticketsTotal)} ({formatPercent(event.ticketsTotal ? event.ticketsSold / event.ticketsTotal : 0)})\r\n                    </TD>\r\n                    <TD>{formatCurrency(event.grossRevenue)}</TD>\r\n                  </tr>\r\n                ))}\r\n              </TBody>\r\n            </Table>\r\n          </div>\r\n        </Card>\r\n      </section>\r\n\r\n      <section className=\"grid gap-6 lg:grid-cols-2\">\r\n        <Card title=\"Donor acquisition (last 12 months)\">\r\n          <BarChartComponent\r\n            data={data.donors.charts.acquisitions}\r\n            bars={[{ dataKey: 'value', color: '#2563eb', name: 'New donors' }]}\r\n            footer={<p className=\"text-xs text-slate-500\">Source: eTapestry synced donors</p>}\r\n          />\r\n        </Card>\r\n        <Card title=\"Gift distribution\">\r\n          <PieChartComponent\r\n            data={data.donors.charts.giftDistribution}\r\n            footer={<p className=\"text-xs text-slate-500\">Segments by donor lifetime value</p>}\r\n          />\r\n        </Card>\r\n      </section>\r\n\r\n      <section className=\"grid gap-6 lg:grid-cols-2\">\r\n        <Card title=\"Sessions (last 30 days)\" description=\"Google Analytics 4 daily sessions trend.\">\r\n          <TimeSeriesChart\r\n            data={data.analytics.data.sessionsSeries.points}\r\n            lines={[{ dataKey: 'value', color: '#0f172a', name: 'Sessions' }]}\r\n            footer={\r\n              data.analytics.data.sessionsSeries.error ? (\r\n                <p className=\"text-sm text-red-500\">{data.analytics.data.sessionsSeries.error}</p>\r\n              ) : (\r\n                <p className=\"text-xs text-slate-500\">Source: Google Analytics Data API</p>\r\n              )\r\n            }\r\n          />\r\n        </Card>\r\n        <Card title=\"Top pages\" description=\"Highest pageviews by title.\">\r\n          <div className=\"overflow-x-auto\">\r\n            <Table>\r\n              <THead>\r\n                <TH>Path</TH>\r\n                <TH>Title</TH>\r\n                <TH>Pageviews</TH>\r\n              </THead>\r\n              <TBody>\r\n                {data.analytics.data.topPages.rows.map((row) => (\r\n                  <tr key={`${row.path}-${row.title}`}>\r\n                    <TD className=\"font-medium\">{row.path}</TD>\r\n                    <TD>{row.title}</TD>\r\n                    <TD>{formatNumber(row.pageviews)}</TD>\r\n                  </tr>\r\n                ))}\r\n              </TBody>\r\n            </Table>\r\n          </div>\r\n          {data.analytics.data.topPages.error ? <p className=\"mt-2 text-sm text-red-500\">{data.analytics.data.topPages.error}</p> : null}\r\n        </Card>\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n","import { subMonths } from 'date-fns';\r\n\r\nimport type { DashboardData } from '@/lib/dashboard-data';\r\nimport { getDashboardData } from '@/lib/dashboard-data';\r\nimport type { EventsPageData, EventFilters } from '@/lib/events-data';\r\nimport { defaultEventFilters, getEventsData } from '@/lib/events-data';\r\nimport type { AnalyticsFilters } from '@/lib/analytics-data';\r\nimport { defaultAnalyticsFilters, getAnalyticsData } from '@/lib/analytics-data';\r\nimport type { DonorListResult } from '@/lib/donor-data';\r\nimport { getDonorList } from '@/lib/donor-data';\r\n\r\nexport type InsightImpact = 'positive' | 'neutral' | 'negative';\r\n\r\nexport interface InsightHighlight {\r\n  title: string;\r\n  description: string;\r\n  impact: InsightImpact;\r\n}\r\n\r\nexport interface InsightsData {\r\n  generatedAt: string;\r\n  range: { from: Date; to: Date };\r\n  dashboard: DashboardData;\r\n  donors: DonorListResult;\r\n  events: { filters: EventFilters; data: EventsPageData };\r\n  analytics: { filters: AnalyticsFilters; data: Awaited<ReturnType<typeof getAnalyticsData>> };\r\n  metrics: {\r\n    fundsMomentum: number;\r\n    sessionsMomentum: number;\r\n    avgOccupancy: number;\r\n  };\r\n  highlights: InsightHighlight[];\r\n}\r\n\r\nconst MOMENTUM_THRESHOLD = 0.05;\r\n\r\nfunction percentChange(current: number, previous: number) {\r\n  if (!Number.isFinite(current) || !Number.isFinite(previous) || previous === 0) {\r\n    return 0;\r\n  }\r\n  return (current - previous) / Math.abs(previous);\r\n}\r\n\r\nfunction rollingAverage(values: number[], length: number) {\r\n  if (!values.length || length <= 0) return 0;\r\n  const slice = values.slice(-length);\r\n  if (!slice.length) return 0;\r\n  return slice.reduce((sum, value) => sum + value, 0) / slice.length;\r\n}\r\n\r\nfunction calculateFundsMomentum(series: DashboardData['charts']['monthly']) {\r\n  if (series.length < 4) return 0;\r\n  const funds = series.map((point) => point.funds);\r\n  const recent = rollingAverage(funds, 3);\r\n  const prior = rollingAverage(funds.slice(0, -3), 3);\r\n  return percentChange(recent, prior);\r\n}\r\n\r\nfunction calculateSessionsMomentum(points: Awaited<ReturnType<typeof getAnalyticsData>>['sessionsSeries']['points']) {\r\n  if (points.length < 14) return 0;\r\n  const values = points.map((point) => point.value);\r\n  const recent = rollingAverage(values.slice(-7), 7);\r\n  const prior = rollingAverage(values.slice(-14, -7), 7);\r\n  return percentChange(recent, prior);\r\n}\r\n\r\nfunction calculateAverageOccupancy(events: EventsPageData['events']) {\r\n  const withCapacity = events.filter((event) => event.ticketsTotal > 0);\r\n  if (!withCapacity.length) return 0;\r\n  const totalCapacity = withCapacity.reduce((sum, event) => sum + event.ticketsTotal, 0);\r\n  const totalSold = withCapacity.reduce((sum, event) => sum + event.ticketsSold, 0);\r\n  return totalCapacity === 0 ? 0 : totalSold / totalCapacity;\r\n}\r\n\r\nfunction describeMomentum(value: number, positiveLabel: string, negativeLabel: string, neutralLabel: string): InsightHighlight['impact'] {\r\n  if (value > MOMENTUM_THRESHOLD) return 'positive';\r\n  if (value < -MOMENTUM_THRESHOLD) return 'negative';\r\n  return 'neutral';\r\n}\r\n\r\nfunction buildHighlights(params: {\r\n  fundsMomentum: number;\r\n  sessionsMomentum: number;\r\n  avgOccupancy: number;\r\n  topDonor?: { name: string; totalGiven: number };\r\n  topEvent?: { name: string; grossRevenue: number; ticketsSold: number; ticketsTotal: number };\r\n  topPage?: { title: string; pageviews: number };\r\n}): InsightHighlight[] {\r\n  const highlights: InsightHighlight[] = [];\r\n\r\n  highlights.push({\r\n    title: 'Giving momentum',\r\n    description:\r\n      params.fundsMomentum > MOMENTUM_THRESHOLD\r\n        ? 'Monthly funds raised increased compared to the prior quarter.'\r\n        : params.fundsMomentum < -MOMENTUM_THRESHOLD\r\n          ? 'Funds raised dipped versus the prior quarter—consider a donor re-engagement push.'\r\n          : 'Giving volume is steady when compared to the previous quarter.',\r\n    impact: describeMomentum(params.fundsMomentum, 'positive', 'negative', 'neutral')\r\n  });\r\n\r\n  highlights.push({\r\n    title: 'Digital engagement',\r\n    description:\r\n      params.sessionsMomentum > MOMENTUM_THRESHOLD\r\n        ? 'Website sessions grew over the last two weeks, showing healthy traffic momentum.'\r\n        : params.sessionsMomentum < -MOMENTUM_THRESHOLD\r\n          ? 'Sessions trended down in the past two weeks; review campaign and content cadence.'\r\n          : 'Sessions are holding steady week over week.',\r\n    impact: describeMomentum(params.sessionsMomentum, 'positive', 'negative', 'neutral')\r\n  });\r\n\r\n  highlights.push({\r\n    title: 'Event demand',\r\n    description:\r\n      params.avgOccupancy >= 0.85\r\n        ? 'Event attendance is exceeding 85% capacity—consider adding more sessions.'\r\n        : params.avgOccupancy <= 0.55\r\n          ? 'Average attendance is below 55% of capacity—review pricing or promotion.'\r\n          : 'Event attendance is healthy with mid-level capacity fill.',\r\n    impact:\r\n      params.avgOccupancy >= 0.85 ? 'positive' : params.avgOccupancy <= 0.55 ? 'negative' : 'neutral'\r\n  });\r\n\r\n  if (params.topDonor) {\r\n    highlights.push({\r\n      title: `${params.topDonor.name} leads giving`,\r\n      description: `Top lifetime donor has contributed $${params.topDonor.totalGiven.toLocaleString()} — nurture this relationship for upcoming campaigns.`,\r\n      impact: 'positive'\r\n    });\r\n  }\r\n\r\n  if (params.topEvent) {\r\n    const occupancy = params.topEvent.ticketsTotal\r\n      ? Math.round((params.topEvent.ticketsSold / params.topEvent.ticketsTotal) * 100)\r\n      : null;\r\n    highlights.push({\r\n      title: `${params.topEvent.name} driving revenue`,\r\n      description: `Highest-grossing event delivered $${params.topEvent.grossRevenue.toLocaleString()} in revenue${occupancy ? ` at ${occupancy}% capacity` : ''}.`,\r\n      impact: 'positive'\r\n    });\r\n  }\r\n\r\n  if (params.topPage) {\r\n    highlights.push({\r\n      title: 'Top content performer',\r\n      description: `“${params.topPage.title}” led GA4 pageviews (${params.topPage.pageviews.toLocaleString()} views). Share this insight with marketing.`,\r\n      impact: 'neutral'\r\n    });\r\n  }\r\n\r\n  return highlights;\r\n}\r\n\r\nexport async function getInsightsData(): Promise<InsightsData> {\r\n  const now = new Date();\r\n  const range = { from: subMonths(now, 11), to: now };\r\n  const eventFilters = defaultEventFilters();\r\n  const analyticsFilters = defaultAnalyticsFilters();\r\n\r\n  const [dashboard, donors, eventsData, analyticsData] = await Promise.all([\r\n    getDashboardData('12m'),\r\n    getDonorList({ page: 1, pageSize: 5 }),\r\n    getEventsData(eventFilters),\r\n    getAnalyticsData(analyticsFilters)\r\n  ]);\r\n\r\n  const fundsMomentum = calculateFundsMomentum(dashboard.charts.monthly);\r\n  const sessionsMomentum = calculateSessionsMomentum(analyticsData.sessionsSeries.points);\r\n  const avgOccupancy = calculateAverageOccupancy(eventsData.events);\r\n\r\n  const topEvent = eventsData.events\r\n    .slice()\r\n    .sort((a, b) => b.grossRevenue - a.grossRevenue)[0];\r\n  const topPage = analyticsData.topPages.rows[0];\r\n  const topDonor = donors.donors[0];\r\n\r\n  const highlights = buildHighlights({\r\n    fundsMomentum,\r\n    sessionsMomentum,\r\n    avgOccupancy,\r\n    topDonor: topDonor\r\n      ? {\r\n          name: topDonor.name,\r\n          totalGiven: topDonor.totalGiven\r\n        }\r\n      : undefined,\r\n    topEvent: topEvent\r\n      ? {\r\n          name: topEvent.name,\r\n          grossRevenue: topEvent.grossRevenue,\r\n          ticketsSold: topEvent.ticketsSold,\r\n          ticketsTotal: topEvent.ticketsTotal\r\n        }\r\n      : undefined,\r\n    topPage\r\n  });\r\n\r\n  return {\r\n    generatedAt: now.toISOString(),\r\n    range,\r\n    dashboard,\r\n    donors,\r\n    events: { filters: eventFilters, data: eventsData },\r\n    analytics: { filters: analyticsFilters, data: analyticsData },\r\n    metrics: {\r\n      fundsMomentum,\r\n      sessionsMomentum,\r\n      avgOccupancy\r\n    },\r\n    highlights\r\n  };\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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","ignoreList":[0,1,2,3,4,5,9,12,14,15,16,18,19,21]}