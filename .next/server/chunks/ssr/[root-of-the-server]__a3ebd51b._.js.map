{"version":3,"sources":["../../../../node_modules/clsx/dist/clsx.mjs","../../../../src/components/ui/card.tsx","../../../../src/components/layout/page-header.tsx","../../../../src/lib/email-data.ts","../../../../src/app/%28dashboard%29/emails/create/wizard.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/%28dashboard%29/emails/create/page.tsx"],"sourcesContent":["function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","import type { ReactNode } from \"react\";\r\nimport clsx from \"clsx\";\r\n\r\ninterface CardProps {\r\n  title?: string;\r\n  description?: string;\r\n  className?: string;\r\n  children: ReactNode;\r\n  actions?: ReactNode;\r\n}\r\n\r\nexport function Card({ title, description, className, children, actions }: CardProps) {\r\n  return (\r\n    <section className={clsx(\"card p-6 space-y-4\", className)}>\r\n      {(title || description || actions) && (\r\n        <header className=\"flex flex-wrap items-center justify-between gap-4\">\r\n          <div>\r\n            {title ? <h3 className=\"text-lg font-semibold text-slate-900\">{title}</h3> : null}\r\n            {description ? <p className=\"text-sm text-slate-500\">{description}</p> : null}\r\n          </div>\r\n          {actions}\r\n        </header>\r\n      )}\r\n      <div>{children}</div>\r\n    </section>\r\n  );\r\n}\r\n\r\n","import type { ReactNode } from \"react\";\r\nimport clsx from \"clsx\";\r\n\r\ninterface PageHeaderProps {\r\n  eyebrow?: string;\r\n  title: string;\r\n  description?: string;\r\n  actions?: ReactNode;\r\n  children?: ReactNode;\r\n  className?: string;\r\n}\r\n\r\nexport function PageHeader({ eyebrow, title, description, actions, children, className }: PageHeaderProps) {\r\n  return (\r\n    <section\r\n      className={clsx(\r\n        \"relative overflow-hidden rounded-[32px] border border-white/60 bg-white/80 p-6 shadow-[0px_25px_60px_rgba(15,23,42,0.08)] backdrop-blur\",\r\n        className\r\n      )}\r\n    >\r\n      <div className=\"pointer-events-none absolute inset-0\">\r\n        <div className=\"absolute -top-16 -right-8 h-48 w-48 rounded-full bg-brand/15 blur-3xl\" />\r\n        <div className=\"absolute bottom-[-60px] left-[-40px] h-44 w-44 rounded-full bg-accent/10 blur-3xl\" />\r\n      </div>\r\n      <div className=\"relative z-10 flex flex-wrap items-start gap-6\">\r\n        <div className=\"space-y-3\">\r\n          {eyebrow ? (\r\n            <span className=\"inline-flex items-center rounded-full border border-slate-100/70 bg-slate-50/80 px-3 py-1 text-xs font-semibold uppercase tracking-[0.16em] text-slate-500\">\r\n              {eyebrow}\r\n            </span>\r\n          ) : null}\r\n          <div>\r\n            <h1 className=\"text-3xl font-semibold leading-tight text-slate-900\">{title}</h1>\r\n            {description ? <p className=\"mt-2 max-w-3xl text-sm text-slate-600\">{description}</p> : null}\r\n          </div>\r\n        </div>\r\n        {actions ? <div className=\"ml-auto flex flex-col items-stretch gap-3\">{actions}</div> : null}\r\n      </div>\r\n      {children ? <div className=\"relative z-10 mt-6\">{children}</div> : null}\r\n    </section>\r\n  );\r\n}\r\n\r\ninterface PageHeaderMetaProps {\r\n  items: Array<{\r\n    label: string;\r\n    value: string;\r\n    helper?: string;\r\n  }>;\r\n  columns?: number;\r\n}\r\n\r\nexport function PageHeaderMeta({ items, columns = 3 }: PageHeaderMetaProps) {\r\n  return (\r\n    <div\r\n      className={clsx(\r\n        \"grid gap-4 text-sm text-slate-600\",\r\n        columns === 2 ? \"sm:grid-cols-2\" : columns === 4 ? \"sm:grid-cols-2 lg:grid-cols-4\" : \"sm:grid-cols-3\"\r\n      )}\r\n    >\r\n      {items.map((item) => (\r\n        <div\r\n          key={`${item.label}-${item.value}`}\r\n          className=\"rounded-2xl border border-slate-100/70 bg-white/90 px-4 py-3 shadow-inner shadow-slate-200/70\"\r\n        >\r\n          <p className=\"text-xs font-semibold uppercase tracking-wide text-slate-500\">{item.label}</p>\r\n          <p className=\"mt-1 text-base font-semibold text-slate-900\">{item.value}</p>\r\n          {item.helper ? <p className=\"mt-0.5 text-xs text-slate-500\">{item.helper}</p> : null}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n","import { CampaignStatus } from '@prisma/client';\r\n\r\nimport { prisma } from '@/lib/prisma';\r\n\r\nexport async function getEmailCampaigns() {\r\n  try {\r\n    return await prisma.emailCampaign.findMany({\r\n      include: {\r\n        template: true,\r\n        audienceSegment: true,\r\n        _count: { select: { logs: true } }\r\n      },\r\n      orderBy: { createdAt: 'desc' }\r\n    });\r\n  } catch (error) {\r\n    console.warn('Unable to load email campaigns, returning empty list', error instanceof Error ? error.message : error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function getEmailFormData() {\r\n  try {\r\n    const [templates, events, pledgeCampaigns, sampleDonor] = await Promise.all([\r\n      prisma.emailTemplate.findMany({ orderBy: { name: 'asc' } }),\r\n      prisma.event.findMany({\r\n        orderBy: { startDate: 'desc' },\r\n        select: {\r\n          id: true,\r\n          name: true,\r\n          startDate: true\r\n        }\r\n      }),\r\n      prisma.pledge.findMany({\r\n        where: { campaign: { not: null } },\r\n        distinct: ['campaign'],\r\n        select: { campaign: true }\r\n      }),\r\n      prisma.donor.findFirst({\r\n        orderBy: { totalGiven: 'desc' },\r\n        select: { name: true, email: true }\r\n      })\r\n    ]);\r\n\r\n    return {\r\n      templates,\r\n      events: events.map((event) => ({\r\n        ...event,\r\n        startDate: event.startDate.toISOString()\r\n      })),\r\n      pledgeCampaigns: pledgeCampaigns.map((pledge) => pledge.campaign!).filter(Boolean),\r\n      sampleDonor\r\n    };\r\n  } catch (error) {\r\n    console.warn('Unable to load email form data', error instanceof Error ? error.message : error);\r\n    return {\r\n      templates: [],\r\n      events: [],\r\n      pledgeCampaigns: [],\r\n      sampleDonor: null\r\n    };\r\n  }\r\n}\r\n\r\nexport async function getAudienceSegments() {\r\n  try {\r\n    return await prisma.audienceSegment.findMany({\r\n      orderBy: { createdAt: 'desc' }\r\n    });\r\n  } catch (error) {\r\n    console.warn('Unable to load audience segments', error instanceof Error ? error.message : error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport function campaignStatusLabel(status: CampaignStatus) {\r\n  switch (status) {\r\n    case CampaignStatus.DRAFT:\r\n      return 'Draft';\r\n    case CampaignStatus.SCHEDULED:\r\n      return 'Scheduled';\r\n    case CampaignStatus.SENT:\r\n      return 'Sent';\r\n    case CampaignStatus.FAILED:\r\n      return 'Failed';\r\n    default:\r\n      return status;\r\n  }\r\n}\r\n\r\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const CampaignWizard = registerClientReference(\n    function() { throw new Error(\"Attempted to call CampaignWizard() from the server but CampaignWizard is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/(dashboard)/emails/create/wizard.tsx\",\n    \"CampaignWizard\",\n);\n","import { Card } from '@/components/ui/card';\r\nimport { createCampaignAction } from '@/app/(dashboard)/emails/actions';\r\nimport { getEmailFormData } from '@/lib/email-data';\r\nimport { PageHeader } from '@/components/layout/page-header';\r\n\r\nimport { CampaignWizard } from '@/app/(dashboard)/emails/create/wizard';\r\n\r\nexport default async function CreateEmailPage() {\r\n  const data = await getEmailFormData();\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <PageHeader\r\n        eyebrow=\"Outreach\"\r\n        title=\"Create email campaign\"\r\n        description=\"Define your audience, choose a template, and schedule delivery.\"\r\n      />\r\n      <Card>\r\n        <CampaignWizard data={data} action={createCampaignAction} />\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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","ignoreList":[0,4]}