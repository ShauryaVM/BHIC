module.exports=[66718,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(98621);let e=(0,c.forwardRef)(function({className:a,error:c,...e},f){return(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("input",{ref:f,className:(0,d.default)("w-full rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-900 outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/30",a),...e}),c?(0,b.jsx)("p",{className:"text-xs text-red-500",children:c}):null]})});a.s(["Input",0,e])},56991,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(99570),e=a.i(66718),f=a.i(98621);let g=(0,c.forwardRef)(function({className:a,children:c,error:d,...e},g){return(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("select",{ref:g,className:(0,f.default)("w-full rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-900 outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/30",a),...e,children:c}),d?(0,b.jsx)("p",{className:"text-xs text-red-500",children:d}):null]})}),h=(0,c.forwardRef)(function({className:a,error:c,...d},e){return(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("textarea",{ref:e,className:(0,f.default)("w-full rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-900 outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/30",a),...d}),c?(0,b.jsx)("p",{className:"text-xs text-red-500",children:c}):null]})});function i({data:a,action:f}){var i;let j,[k,l]=(0,c.useState)(0),[m,n]=(0,c.useTransition)(),[o,p]=(0,c.useState)({}),[q,r]=(0,c.useState)({name:"",audience:{donatedWithinDays:90,totalGivenGreaterThan:1e3,attendedEventIds:[],pledgeCampaigns:[]},templateMode:a.templates.length?"existing":"new",templateId:a.templates[0]?.id??"",newTemplate:{name:"",subject:"",html:"<p>Dear {{ name }},<br/>Thank you for supporting BHIC.</p>",text:"Dear {{ name }},\n\nThank you for supporting BHIC."}}),s=(0,c.useMemo)(()=>"existing"===q.templateMode?a.templates.find(a=>a.id===q.templateId):q.newTemplate,[a.templates,q.templateId,q.templateMode,q.newTemplate]);function t(a,b){r(c=>({...c,audience:{...c.audience,[a]:b}}))}function u(a,b){r(c=>({...c,newTemplate:{...c.newTemplate,[a]:b}}))}return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("ol",{className:"flex flex-wrap items-center gap-4 text-sm font-medium text-slate-500",children:["Campaign","Audience","Template","Review"].map((a,c)=>(0,b.jsxs)("li",{className:c===k?"text-brand":void 0,children:[c+1,". ",a]},a))}),0===k?(0,b.jsxs)("section",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"Campaign name"}),(0,b.jsx)(e.Input,{value:q.name,onChange:a=>r(b=>({...b,name:a.target.value}))})]}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:"Use a descriptive name that is easy for staff to identify later."})]}):null,1===k?(0,b.jsxs)("section",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"Donated within (days)"}),(0,b.jsx)(e.Input,{type:"number",min:0,value:q.audience.donatedWithinDays,onChange:a=>t("donatedWithinDays",Number(a.target.value))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"Minimum lifetime value ($)"}),(0,b.jsx)(e.Input,{type:"number",min:0,value:q.audience.totalGivenGreaterThan,onChange:a=>t("totalGivenGreaterThan",Number(a.target.value))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"Attended events"}),(0,b.jsx)("select",{multiple:!0,className:"h-32 w-full rounded-xl border border-slate-200 px-3 py-2 text-sm",value:q.audience.attendedEventIds,onChange:a=>t("attendedEventIds",Array.from(a.target.selectedOptions,a=>a.value)),children:a.events.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.name," Â· ",function(a,b={month:"short",day:"numeric",year:"numeric"}){let c="string"==typeof a?new Date(a):a;return new Intl.DateTimeFormat("en-US",b).format(c)}(a.startDate)]},a.id))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"Pledge campaigns"}),(0,b.jsx)("select",{multiple:!0,className:"h-32 w-full rounded-xl border border-slate-200 px-3 py-2 text-sm",value:q.audience.pledgeCampaigns,onChange:a=>t("pledgeCampaigns",Array.from(a.target.selectedOptions,a=>a.value)),children:a.pledgeCampaigns.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]})]}):null,2===k?(0,b.jsxs)("section",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-slate-700",children:"Template source"}),(0,b.jsxs)("div",{className:"mt-2 flex flex-wrap gap-4",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)("input",{type:"radio",name:"templateMode",value:"existing",checked:"existing"===q.templateMode,onChange:()=>r(a=>({...a,templateMode:"existing"})),disabled:!a.templates.length}),"Use existing template"]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)("input",{type:"radio",name:"templateMode",value:"new",checked:"new"===q.templateMode,onChange:()=>r(a=>({...a,templateMode:"new"}))}),"Create new template"]})]})]}),"existing"===q.templateMode?(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"Select template"}),(0,b.jsx)(g,{value:q.templateId,onChange:a=>r(b=>({...b,templateId:a.target.value})),children:a.templates.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))})]}):(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"Template name"}),(0,b.jsx)(e.Input,{value:q.newTemplate.name,onChange:a=>u("name",a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"Subject"}),(0,b.jsx)(e.Input,{value:q.newTemplate.subject,onChange:a=>u("subject",a.target.value)})]}),(0,b.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"HTML body"}),(0,b.jsx)(h,{rows:4,value:q.newTemplate.html,onChange:a=>u("html",a.target.value)})]}),(0,b.jsxs)("div",{className:"md:col-span-2 space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-700",children:"Text body"}),(0,b.jsx)(h,{rows:4,value:q.newTemplate.text,onChange:a=>u("text",a.target.value)})]})]})]}):null,3===k?(0,b.jsx)("section",{className:"space-y-4",children:(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-slate-700",children:"Preview"}),(0,b.jsxs)("p",{className:"text-xs text-slate-500",children:["Gemini will use this template plus donor context to suggest a final draft after you save. Below is the base content rendered for"," ",a.sampleDonor?.name??"a sample donor","."]}),(0,b.jsxs)("div",{className:"mt-3 rounded-2xl bg-white p-4 shadow-inner",children:[(0,b.jsx)("div",{className:"font-semibold text-slate-900",children:s?.subject??"Subject TBD"}),(0,b.jsx)("div",{className:"mt-2 text-sm text-slate-700",dangerouslySetInnerHTML:{__html:(i=s?.html,j=a.sampleDonor?.name??"BHIC Supporter",i?.replace(/{{\s*name\s*}}/gi,j)??"")}})]})]})}):null,o.error?(0,b.jsx)("p",{className:"text-sm text-red-500",children:o.error}):null,o.success?(0,b.jsx)("p",{className:"text-sm text-green-600",children:o.success}):null,(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)(d.Button,{type:"button",variant:"ghost",onClick:function(){l(a=>{let b=a-1;return b<0?0:b})},disabled:0===k,children:"Back"}),k<3?(0,b.jsx)(d.Button,{type:"button",onClick:function(){l(a=>{let b=a+1;return b>3?3:b})},children:"Next"}):(0,b.jsx)(d.Button,{type:"button",onClick:function(){p({}),n(async()=>{try{let a={name:q.name,audience:{donatedWithinDays:q.audience.donatedWithinDays,totalGivenGreaterThan:q.audience.totalGivenGreaterThan,attendedEventIds:q.audience.attendedEventIds,pledgeCampaigns:q.audience.pledgeCampaigns},template:"existing"===q.templateMode?{mode:"existing",templateId:q.templateId}:{mode:"new",name:q.newTemplate.name,subject:q.newTemplate.subject,html:q.newTemplate.html,text:q.newTemplate.text}};(await f(a)).success&&p({success:"Campaign saved successfully."})}catch(a){p({error:a instanceof Error?a.message:"Unable to create campaign."})}})},disabled:m,children:m?"Saving...":"Save campaign"})]})]})}a.s(["CampaignWizard",()=>i],56991)}];

//# sourceMappingURL=src_f9925895._.js.map