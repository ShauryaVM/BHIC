{"version":3,"sources":["../../../../src/app/%28dashboard%29/insights/_components/insights-report-button.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/%28dashboard%29/insights/page.tsx","../../../../src/lib/insights-data.ts"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const InsightsReportButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call InsightsReportButton() from the server but InsightsReportButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/(dashboard)/insights/_components/insights-report-button.tsx\",\n    \"InsightsReportButton\",\n);\n","import { Card } from '@/components/ui/card';\r\nimport { Table, TBody, TD, TH, THead } from '@/components/ui/table';\r\nimport { PageHeader, PageHeaderMeta } from '@/components/layout/page-header';\r\nimport { TimeSeriesChart } from '@/components/charts/time-series-chart';\r\nimport { BarChartComponent } from '@/components/charts/bar-chart';\r\nimport { PieChartComponent } from '@/components/charts/pie-chart';\r\nimport { formatCurrency, formatDate, formatNumber, formatPercent } from '@/lib/format';\r\nimport { getInsightsData } from '@/lib/insights-data';\r\nimport { InsightsReportButton } from '@/app/(dashboard)/insights/_components/insights-report-button';\r\n\r\nexport const dynamic = 'force-dynamic';\r\n\r\nfunction formatMomentum(value: number) {\r\n  if (!Number.isFinite(value) || value === 0) return 'vs prior period';\r\n  const sign = value > 0 ? '+' : '';\r\n  return `${sign}${(value * 100).toFixed(1)} pts vs prior period`;\r\n}\r\n\r\nconst impactStyles: Record<string, string> = {\r\n  positive: 'border-green-200 bg-green-50 text-green-900',\r\n  negative: 'border-red-200 bg-red-50 text-red-900',\r\n  neutral: 'border-slate-200 bg-white text-slate-700'\r\n};\r\n\r\nfunction ProgressBar({ value, color }: { value: number; color: string }) {\r\n  if (!Number.isFinite(value)) return null;\r\n  const clamped = Math.min(1, Math.max(0.04, value));\r\n  return (\r\n    <div className=\"mt-1 h-1.5 w-full overflow-hidden rounded-full bg-slate-100\">\r\n      <div className=\"h-full rounded-full\" style={{ width: `${clamped * 100}%`, backgroundColor: color }} />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction formatDateTime(value: string | Date) {\r\n  const date = typeof value === 'string' ? new Date(value) : value;\r\n  return new Intl.DateTimeFormat('en-US', { dateStyle: 'medium', timeStyle: 'short' }).format(date);\r\n}\r\n\r\nfunction formatSeconds(value: number) {\r\n  const minutes = Math.floor(value / 60);\r\n  const seconds = Math.round(value % 60);\r\n  return `${minutes}m ${seconds.toString().padStart(2, '0')}s`;\r\n}\r\n\r\nexport default async function InsightsPage() {\r\n  const data = await getInsightsData();\r\n  const ticketsByEvent = data.events.data.charts.ticketsPerEvent.slice(0, 8);\r\n  const revenueByEvent = data.events.data.charts.revenuePerEvent.slice(0, 8);\r\n  const gaSummary = data.analytics.data.summary;\r\n  const donorRatio =\r\n    data.donors.summary.totalDonors > 0 ? data.donors.summary.activeDonors / data.donors.summary.totalDonors : 0;\r\n  const grossRevenue = data.events.data.summary.grossRevenue;\r\n  const netRevenue = data.events.data.summary.netRevenue;\r\n  const netShare = grossRevenue > 0 ? netRevenue / grossRevenue : 0;\r\n  const generatedOn = formatDateTime(data.generatedAt);\r\n  const eventWindowStart = data.events.filters.from ?? data.range.from;\r\n  const eventWindowEnd = data.events.filters.to ?? data.range.to;\r\n  const analyticsWindowStart = data.analytics.filters.from ?? data.range.from;\r\n  const analyticsWindowEnd = data.analytics.filters.to ?? data.range.to;\r\n\r\n  const summaryItems = [\r\n    {\r\n      label: 'Funds raised (YTD)',\r\n      value: formatCurrency(data.dashboard.kpis.fundsYtd),\r\n      helper: formatMomentum(data.metrics.fundsMomentum)\r\n    },\r\n    {\r\n      label: 'Active donors',\r\n      value: formatNumber(data.dashboard.kpis.activeDonors),\r\n      helper: `${formatNumber(data.donors.summary.totalDonors)} total`\r\n    },\r\n    {\r\n      label: 'Tickets sold',\r\n      value: formatNumber(data.dashboard.kpis.ticketsSold),\r\n      helper: `${formatPercent(data.metrics.avgOccupancy, 0)} avg capacity`\r\n    },\r\n    {\r\n      label: 'Sessions (30d)',\r\n      value: formatNumber(data.dashboard.kpis.sessionsLast30Days),\r\n      helper: formatMomentum(data.metrics.sessionsMomentum)\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <PageHeader\r\n        eyebrow=\"Intelligence\"\r\n        title=\"Integrated insights\"\r\n        description=\"Unified dashboard for revenue, donor, event, and digital performance.\"\r\n        actions={<InsightsReportButton />}\r\n      >\r\n        <PageHeaderMeta items={summaryItems} columns={4} />\r\n      </PageHeader>\r\n\r\n      <Card title=\"Insight highlights\" description=\"Auto-generated observations from merged datasets.\">\r\n        <div className=\"grid gap-4 md:grid-cols-2\">\r\n          {data.highlights.map((highlight) => (\r\n            <div\r\n              key={highlight.title}\r\n              className={`rounded-2xl border p-4 shadow-sm transition ${impactStyles[highlight.impact] ?? impactStyles.neutral}`}\r\n            >\r\n              <p className=\"text-sm font-semibold\">{highlight.title}</p>\r\n              <p className=\"mt-2 text-sm leading-6\">{highlight.description}</p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </Card>\r\n\r\n      <section className=\"grid gap-6 xl:grid-cols-3\">\r\n        <Card title=\"Donor health\" description=\"Fundraising signals from the eTapestry sync.\">\r\n          <div className=\"space-y-4 text-sm\">\r\n            <div>\r\n              <p className=\"font-semibold text-slate-600\">Total donors</p>\r\n              <p className=\"text-2xl font-semibold text-slate-900\">{formatNumber(data.donors.summary.totalDonors)}</p>\r\n              <p className=\"text-xs text-slate-500\">All-time in CRM</p>\r\n            </div>\r\n            <div>\r\n              <p className=\"font-semibold text-slate-600\">Active donors</p>\r\n              <p className=\"text-2xl font-semibold text-slate-900\">{formatNumber(data.donors.summary.activeDonors)}</p>\r\n              <p className=\"text-xs text-slate-500\">Gifted in last 12 months ({formatPercent(donorRatio)})</p>\r\n              <ProgressBar value={donorRatio} color=\"#2563eb\" />\r\n            </div>\r\n            <div>\r\n              <p className=\"font-semibold text-slate-600\">Avg lifetime value</p>\r\n              <p className=\"text-2xl font-semibold text-slate-900\">\r\n                {formatCurrency(data.donors.summary.averageLifetimeValue)}\r\n              </p>\r\n              <p className=\"text-xs text-slate-500\">Mean revenue per donor</p>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n\r\n        <Card title=\"Revenue mix\" description=\"Eventbrite revenue + capacity snapshot.\">\r\n          <div className=\"space-y-4 text-sm\">\r\n            <div>\r\n              <p className=\"font-semibold text-slate-600\">Gross revenue</p>\r\n              <p className=\"text-2xl font-semibold text-slate-900\">{formatCurrency(grossRevenue)}</p>\r\n              <p className=\"text-xs text-slate-500\">\r\n                {formatNumber(data.events.data.summary.ticketsSold)} tickets sold\r\n              </p>\r\n            </div>\r\n            <div>\r\n              <p className=\"font-semibold text-slate-600\">Net revenue</p>\r\n              <p className=\"text-2xl font-semibold text-slate-900\">{formatCurrency(netRevenue)}</p>\r\n              <p className=\"text-xs text-slate-500\">{formatPercent(netShare)} of gross captured</p>\r\n              <ProgressBar value={netShare} color=\"#059669\" />\r\n            </div>\r\n            <div>\r\n              <p className=\"font-semibold text-slate-600\">Avg capacity fill</p>\r\n              <p className=\"text-2xl font-semibold text-slate-900\">{formatPercent(data.metrics.avgOccupancy)}</p>\r\n              <p className=\"text-xs text-slate-500\">Across synced events</p>\r\n              <ProgressBar value={data.metrics.avgOccupancy} color=\"#f97316\" />\r\n            </div>\r\n          </div>\r\n        </Card>\r\n\r\n        <Card title=\"Data freshness\" description=\"Windows synced into this briefing.\">\r\n          <dl className=\"space-y-3 text-sm\">\r\n            <div>\r\n              <dt className=\"font-semibold text-slate-600\">Insights generated</dt>\r\n              <dd className=\"text-slate-900\">{generatedOn}</dd>\r\n            </div>\r\n            <div>\r\n              <dt className=\"font-semibold text-slate-600\">Financial window</dt>\r\n              <dd className=\"text-slate-900\">\r\n                {formatDate(data.range.from)} &ndash; {formatDate(data.range.to)}\r\n              </dd>\r\n            </div>\r\n            <div>\r\n              <dt className=\"font-semibold text-slate-600\">Events window</dt>\r\n              <dd className=\"text-slate-900\">\r\n                {formatDate(eventWindowStart)} &ndash; {formatDate(eventWindowEnd)}\r\n              </dd>\r\n            </div>\r\n            <div>\r\n              <dt className=\"font-semibold text-slate-600\">Analytics window</dt>\r\n              <dd className=\"text-slate-900\">\r\n                {formatDate(analyticsWindowStart)} &ndash; {formatDate(analyticsWindowEnd)}\r\n              </dd>\r\n            </div>\r\n          </dl>\r\n        </Card>\r\n      </section>\r\n\r\n      <Card\r\n        title=\"Monthly performance\"\r\n        description=\"Funds raised, tickets sold, and website sessions across the last 12 months.\"\r\n      >\r\n        <TimeSeriesChart\r\n          data={data.dashboard.charts.monthly}\r\n          lines={[\r\n            { dataKey: 'funds', color: '#0f172a', name: 'Funds raised ($)' },\r\n            { dataKey: 'tickets', color: '#2563eb', name: 'Tickets sold' },\r\n            { dataKey: 'sessions', color: '#059669', name: 'Sessions' }\r\n          ]}\r\n        />\r\n      </Card>\r\n\r\n      <section className=\"grid gap-6 lg:grid-cols-2\">\r\n        <Card\r\n          title=\"Top donors\"\r\n          description=\"Highest lifetime value donors with most recent gift date.\"\r\n          actions={\r\n            <p className=\"text-xs text-slate-500\">\r\n              Avg lifetime value {formatCurrency(data.donors.summary.averageLifetimeValue)}\r\n            </p>\r\n          }\r\n        >\r\n          <div className=\"overflow-x-auto\">\r\n            <Table>\r\n              <THead>\r\n                <TH>Name</TH>\r\n                <TH>Email</TH>\r\n                <TH>Lifetime given</TH>\r\n                <TH>Last gift</TH>\r\n              </THead>\r\n              <TBody>\r\n                {data.donors.donors.map((donor) => (\r\n                  <tr key={donor.id}>\r\n                    <TD className=\"font-semibold text-slate-900\">{donor.name}</TD>\r\n                    <TD>{donor.email ?? '—'}</TD>\r\n                    <TD>{formatCurrency(donor.totalGiven)}</TD>\r\n                    <TD>{donor.lastGiftDate ? formatDate(donor.lastGiftDate) : 'No gifts'}</TD>\r\n                  </tr>\r\n                ))}\r\n              </TBody>\r\n            </Table>\r\n          </div>\r\n        </Card>\r\n\r\n        <Card\r\n          title=\"Event performance snapshot\"\r\n          description=\"Most recent Eventbrite programs with revenue and capacity details.\"\r\n          actions={\r\n            <p className=\"text-xs text-slate-500\">\r\n              {formatNumber(data.events.data.summary.upcomingEvents)} upcoming ·{' '}\r\n              {formatNumber(data.events.data.summary.pastEvents)} past\r\n            </p>\r\n          }\r\n        >\r\n          <div className=\"overflow-x-auto\">\r\n            <Table>\r\n              <THead>\r\n                <TH>Name</TH>\r\n                <TH>Dates</TH>\r\n                <TH>Tickets</TH>\r\n                <TH>Capacity</TH>\r\n                <TH>Gross revenue</TH>\r\n              </THead>\r\n              <TBody>\r\n                {data.events.data.events.slice(0, 5).map((event) => (\r\n                  <tr key={event.id}>\r\n                    <TD className=\"font-semibold text-slate-900\">{event.name}</TD>\r\n                    <TD className=\"text-sm text-slate-600\">\r\n                      {formatDate(event.startDate)} – {formatDate(event.endDate)}\r\n                    </TD>\r\n                    <TD>{formatNumber(event.ticketsSold)}</TD>\r\n                    <TD>\r\n                      {formatNumber(event.ticketsTotal)} (\r\n                      {formatPercent(event.ticketsTotal ? event.ticketsSold / event.ticketsTotal : 0)})\r\n                    </TD>\r\n                    <TD>{formatCurrency(event.grossRevenue)}</TD>\r\n                  </tr>\r\n                ))}\r\n              </TBody>\r\n            </Table>\r\n          </div>\r\n        </Card>\r\n      </section>\r\n\r\n      <section className=\"grid gap-6 lg:grid-cols-2\">\r\n        <Card title=\"Tickets per event\" description=\"Top recent programs ranked by attendance.\">\r\n          <BarChartComponent\r\n            data={ticketsByEvent}\r\n            bars={[{ dataKey: 'tickets', color: '#2563eb', name: 'Tickets sold' }]}\r\n            footer={<p className=\"text-xs text-slate-500\">Data source: Eventbrite</p>}\r\n          />\r\n        </Card>\r\n        <Card title=\"Revenue per event\" description=\"Gross vs. net performance for recent programs.\">\r\n          <BarChartComponent\r\n            data={revenueByEvent}\r\n            bars={[\r\n              { dataKey: 'gross', color: '#0f172a', name: 'Gross' },\r\n              { dataKey: 'net', color: '#059669', name: 'Net' }\r\n            ]}\r\n            stacked={false}\r\n            footer={<p className=\"text-xs text-slate-500\">Bars highlight net capture per program.</p>}\r\n          />\r\n        </Card>\r\n      </section>\r\n\r\n      <section className=\"grid gap-6 lg:grid-cols-2\">\r\n        <Card title=\"Donor acquisition (last 12 months)\">\r\n          <BarChartComponent\r\n            data={data.donors.charts.acquisitions}\r\n            bars={[{ dataKey: 'value', color: '#2563eb', name: 'New donors' }]}\r\n            footer={<p className=\"text-xs text-slate-500\">Source: eTapestry synced donors</p>}\r\n          />\r\n        </Card>\r\n        <Card title=\"Gift distribution\">\r\n          <PieChartComponent\r\n            data={data.donors.charts.giftDistribution}\r\n            footer={<p className=\"text-xs text-slate-500\">Segments by donor lifetime value</p>}\r\n          />\r\n        </Card>\r\n      </section>\r\n\r\n      <section className=\"grid gap-6 xl:grid-cols-3\">\r\n        <Card\r\n          className=\"xl:col-span-2\"\r\n          title=\"Sessions (last 30 days)\"\r\n          description=\"Google Analytics 4 daily sessions trend.\"\r\n        >\r\n          <TimeSeriesChart\r\n            data={data.analytics.data.sessionsSeries.points}\r\n            lines={[{ dataKey: 'value', color: '#0f172a', name: 'Sessions' }]}\r\n            footer={\r\n              data.analytics.data.sessionsSeries.error ? (\r\n                <p className=\"text-sm text-red-500\">{data.analytics.data.sessionsSeries.error}</p>\r\n              ) : (\r\n                <p className=\"text-xs text-slate-500\">Source: Google Analytics Data API</p>\r\n              )\r\n            }\r\n          />\r\n        </Card>\r\n        <Card title=\"Engagement breakdown\" description=\"Key GA4 metrics for the selected window.\">\r\n          <div className=\"space-y-4 text-sm\">\r\n            <div>\r\n              <p className=\"font-semibold text-slate-600\">Users</p>\r\n              <p className=\"text-2xl font-semibold text-slate-900\">{formatNumber(gaSummary.users)}</p>\r\n              <p className=\"text-xs text-slate-500\">Unique visitors in window</p>\r\n            </div>\r\n            <div>\r\n              <p className=\"font-semibold text-slate-600\">Sessions</p>\r\n              <p className=\"text-2xl font-semibold text-slate-900\">{formatNumber(gaSummary.sessions)}</p>\r\n              <p className=\"text-xs text-slate-500\">{formatMomentum(data.metrics.sessionsMomentum)}</p>\r\n            </div>\r\n            <div>\r\n              <p className=\"font-semibold text-slate-600\">Pageviews</p>\r\n              <p className=\"text-2xl font-semibold text-slate-900\">{formatNumber(gaSummary.pageviews)}</p>\r\n              <p className=\"text-xs text-slate-500\">Total content views</p>\r\n            </div>\r\n            <div>\r\n              <p className=\"font-semibold text-slate-600\">Avg engagement</p>\r\n              <p className=\"text-2xl font-semibold text-slate-900\">{formatSeconds(gaSummary.averageEngagementTime)}</p>\r\n              <p className=\"text-xs text-slate-500\">Per engaged session</p>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n      </section>\r\n\r\n      <Card title=\"Top pages\" description=\"Highest pageviews by title.\">\r\n        <div className=\"overflow-x-auto\">\r\n          <Table>\r\n            <THead>\r\n              <TH>Path</TH>\r\n              <TH>Title</TH>\r\n              <TH>Pageviews</TH>\r\n            </THead>\r\n            <TBody>\r\n              {data.analytics.data.topPages.rows.map((row) => (\r\n                <tr key={`${row.path}-${row.title}`}>\r\n                  <TD className=\"font-medium\">{row.path}</TD>\r\n                  <TD>{row.title}</TD>\r\n                  <TD>{formatNumber(row.pageviews)}</TD>\r\n                </tr>\r\n              ))}\r\n            </TBody>\r\n          </Table>\r\n        </div>\r\n        {data.analytics.data.topPages.error ? (\r\n          <p className=\"mt-2 text-sm text-red-500\">{data.analytics.data.topPages.error}</p>\r\n        ) : null}\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n","import { subMonths } from 'date-fns';\r\n\r\nimport type { DashboardData } from '@/lib/dashboard-data';\r\nimport { getDashboardData } from '@/lib/dashboard-data';\r\nimport type { EventsPageData, EventFilters } from '@/lib/events-data';\r\nimport { defaultEventFilters, getEventsData } from '@/lib/events-data';\r\nimport type { AnalyticsFilters } from '@/lib/analytics-data';\r\nimport { defaultAnalyticsFilters, getAnalyticsData } from '@/lib/analytics-data';\r\nimport type { DonorListResult } from '@/lib/donor-data';\r\nimport { getDonorList } from '@/lib/donor-data';\r\n\r\nexport type InsightImpact = 'positive' | 'neutral' | 'negative';\r\n\r\nexport interface InsightHighlight {\r\n  title: string;\r\n  description: string;\r\n  impact: InsightImpact;\r\n}\r\n\r\nexport interface InsightsData {\r\n  generatedAt: string;\r\n  range: { from: Date; to: Date };\r\n  dashboard: DashboardData;\r\n  donors: DonorListResult;\r\n  events: { filters: EventFilters; data: EventsPageData };\r\n  analytics: { filters: AnalyticsFilters; data: Awaited<ReturnType<typeof getAnalyticsData>> };\r\n  metrics: {\r\n    fundsMomentum: number;\r\n    sessionsMomentum: number;\r\n    avgOccupancy: number;\r\n  };\r\n  highlights: InsightHighlight[];\r\n}\r\n\r\nconst MOMENTUM_THRESHOLD = 0.05;\r\n\r\nfunction percentChange(current: number, previous: number) {\r\n  if (!Number.isFinite(current) || !Number.isFinite(previous) || previous === 0) {\r\n    return 0;\r\n  }\r\n  return (current - previous) / Math.abs(previous);\r\n}\r\n\r\nfunction rollingAverage(values: number[], length: number) {\r\n  if (!values.length || length <= 0) return 0;\r\n  const slice = values.slice(-length);\r\n  if (!slice.length) return 0;\r\n  return slice.reduce((sum, value) => sum + value, 0) / slice.length;\r\n}\r\n\r\nfunction calculateFundsMomentum(series: DashboardData['charts']['monthly']) {\r\n  if (series.length < 4) return 0;\r\n  const funds = series.map((point) => point.funds);\r\n  const recent = rollingAverage(funds, 3);\r\n  const prior = rollingAverage(funds.slice(0, -3), 3);\r\n  return percentChange(recent, prior);\r\n}\r\n\r\nfunction calculateSessionsMomentum(points: Awaited<ReturnType<typeof getAnalyticsData>>['sessionsSeries']['points']) {\r\n  if (points.length < 14) return 0;\r\n  const values = points.map((point) => point.value);\r\n  const recent = rollingAverage(values.slice(-7), 7);\r\n  const prior = rollingAverage(values.slice(-14, -7), 7);\r\n  return percentChange(recent, prior);\r\n}\r\n\r\nfunction calculateAverageOccupancy(events: EventsPageData['events']) {\r\n  const withCapacity = events.filter((event) => event.ticketsTotal > 0);\r\n  if (!withCapacity.length) return 0;\r\n  const totalCapacity = withCapacity.reduce((sum, event) => sum + event.ticketsTotal, 0);\r\n  const totalSold = withCapacity.reduce((sum, event) => sum + event.ticketsSold, 0);\r\n  return totalCapacity === 0 ? 0 : totalSold / totalCapacity;\r\n}\r\n\r\nfunction describeMomentum(value: number, positiveLabel: string, negativeLabel: string, neutralLabel: string): InsightHighlight['impact'] {\r\n  if (value > MOMENTUM_THRESHOLD) return 'positive';\r\n  if (value < -MOMENTUM_THRESHOLD) return 'negative';\r\n  return 'neutral';\r\n}\r\n\r\nfunction buildHighlights(params: {\r\n  fundsMomentum: number;\r\n  sessionsMomentum: number;\r\n  avgOccupancy: number;\r\n  topDonor?: { name: string; totalGiven: number };\r\n  topEvent?: { name: string; grossRevenue: number; ticketsSold: number; ticketsTotal: number };\r\n  topPage?: { title: string; pageviews: number };\r\n}): InsightHighlight[] {\r\n  const highlights: InsightHighlight[] = [];\r\n\r\n  highlights.push({\r\n    title: 'Giving momentum',\r\n    description:\r\n      params.fundsMomentum > MOMENTUM_THRESHOLD\r\n        ? 'Monthly funds raised increased compared to the prior quarter.'\r\n        : params.fundsMomentum < -MOMENTUM_THRESHOLD\r\n          ? 'Funds raised dipped versus the prior quarter—consider a donor re-engagement push.'\r\n          : 'Giving volume is steady when compared to the previous quarter.',\r\n    impact: describeMomentum(params.fundsMomentum, 'positive', 'negative', 'neutral')\r\n  });\r\n\r\n  highlights.push({\r\n    title: 'Digital engagement',\r\n    description:\r\n      params.sessionsMomentum > MOMENTUM_THRESHOLD\r\n        ? 'Website sessions grew over the last two weeks, showing healthy traffic momentum.'\r\n        : params.sessionsMomentum < -MOMENTUM_THRESHOLD\r\n          ? 'Sessions trended down in the past two weeks; review campaign and content cadence.'\r\n          : 'Sessions are holding steady week over week.',\r\n    impact: describeMomentum(params.sessionsMomentum, 'positive', 'negative', 'neutral')\r\n  });\r\n\r\n  highlights.push({\r\n    title: 'Event demand',\r\n    description:\r\n      params.avgOccupancy >= 0.85\r\n        ? 'Event attendance is exceeding 85% capacity—consider adding more sessions.'\r\n        : params.avgOccupancy <= 0.55\r\n          ? 'Average attendance is below 55% of capacity—review pricing or promotion.'\r\n          : 'Event attendance is healthy with mid-level capacity fill.',\r\n    impact:\r\n      params.avgOccupancy >= 0.85 ? 'positive' : params.avgOccupancy <= 0.55 ? 'negative' : 'neutral'\r\n  });\r\n\r\n  if (params.topDonor) {\r\n    highlights.push({\r\n      title: `${params.topDonor.name} leads giving`,\r\n      description: `Top lifetime donor has contributed $${params.topDonor.totalGiven.toLocaleString()} — nurture this relationship for upcoming campaigns.`,\r\n      impact: 'positive'\r\n    });\r\n  }\r\n\r\n  if (params.topEvent) {\r\n    const occupancy = params.topEvent.ticketsTotal\r\n      ? Math.round((params.topEvent.ticketsSold / params.topEvent.ticketsTotal) * 100)\r\n      : null;\r\n    highlights.push({\r\n      title: `${params.topEvent.name} driving revenue`,\r\n      description: `Highest-grossing event delivered $${params.topEvent.grossRevenue.toLocaleString()} in revenue${occupancy ? ` at ${occupancy}% capacity` : ''}.`,\r\n      impact: 'positive'\r\n    });\r\n  }\r\n\r\n  if (params.topPage) {\r\n    highlights.push({\r\n      title: 'Top content performer',\r\n      description: `“${params.topPage.title}” led GA4 pageviews (${params.topPage.pageviews.toLocaleString()} views). Share this insight with marketing.`,\r\n      impact: 'neutral'\r\n    });\r\n  }\r\n\r\n  return highlights;\r\n}\r\n\r\nexport async function getInsightsData(): Promise<InsightsData> {\r\n  const now = new Date();\r\n  const range = { from: subMonths(now, 11), to: now };\r\n  const eventFilters = defaultEventFilters();\r\n  const analyticsFilters = defaultAnalyticsFilters();\r\n\r\n  const [dashboard, donors, eventsData, analyticsData] = await Promise.all([\r\n    getDashboardData('12m'),\r\n    getDonorList({ page: 1, pageSize: 5 }),\r\n    getEventsData(eventFilters),\r\n    getAnalyticsData(analyticsFilters)\r\n  ]);\r\n\r\n  const fundsMomentum = calculateFundsMomentum(dashboard.charts.monthly);\r\n  const sessionsMomentum = calculateSessionsMomentum(analyticsData.sessionsSeries.points);\r\n  const avgOccupancy = calculateAverageOccupancy(eventsData.events);\r\n\r\n  const topEvent = eventsData.events\r\n    .slice()\r\n    .sort((a, b) => b.grossRevenue - a.grossRevenue)[0];\r\n  const topPage = analyticsData.topPages.rows[0];\r\n  const topDonor = donors.donors[0];\r\n\r\n  const highlights = buildHighlights({\r\n    fundsMomentum,\r\n    sessionsMomentum,\r\n    avgOccupancy,\r\n    topDonor: topDonor\r\n      ? {\r\n          name: topDonor.name,\r\n          totalGiven: topDonor.totalGiven\r\n        }\r\n      : undefined,\r\n    topEvent: topEvent\r\n      ? {\r\n          name: topEvent.name,\r\n          grossRevenue: topEvent.grossRevenue,\r\n          ticketsSold: topEvent.ticketsSold,\r\n          ticketsTotal: topEvent.ticketsTotal\r\n        }\r\n      : undefined,\r\n    topPage\r\n  });\r\n\r\n  return {\r\n    generatedAt: now.toISOString(),\r\n    range,\r\n    dashboard,\r\n    donors,\r\n    events: { filters: eventFilters, data: eventsData },\r\n    analytics: { filters: analyticsFilters, data: analyticsData },\r\n    metrics: {\r\n      fundsMomentum,\r\n      sessionsMomentum,\r\n      avgOccupancy\r\n    },\r\n    highlights\r\n  };\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"uCAEO,IAAM,EAAuB,CAAA,EAAA,AADpC,EAAA,CAAA,CAAA,OACoC,uBAAA,AAAuB,EACvD,WAAa,MAAM,AAAI,MAAM,sPAAwP,EACrR,oGACA,kFAHG,IAAM,EAAuB,CAAA,EADpC,AACoC,EADpC,CAAA,CAAA,OACoC,uBAAA,AAAuB,EACvD,WAAa,MAAM,AAAI,MAAM,sPAAwP,EACrR,gFACA,6JCLJ,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OCNA,EAAA,EAAA,CAAA,CAAA,MAGA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,OA2BA,SAAS,EAAc,CAAe,CAAE,CAAgB,SACtD,AAAI,AAAC,OAAO,QAAQ,CAAC,IAAa,OAAO,CAAR,OAAgB,CAAC,IAA0B,GAAG,CAAhB,EAGxD,CAAC,EAAU,CAAA,CAAQ,CAAI,KAAK,GAAG,CAAC,GAF9B,CAGX,CAEA,SAAS,EAAe,CAAgB,CAAE,CAAc,EACtD,GAAI,CAAC,EAAO,MAAM,EAAI,GAAU,EAAG,OAAO,EAC1C,IAAM,EAAQ,EAAO,KAAK,CAAC,CAAC,UAC5B,AAAK,EAAM,EAAP,IAAa,CACV,CADY,CACN,MAAM,CAAC,CAAC,EAAK,IAAU,EAAM,EAAO,GAAK,EAAM,MAAM,CADxC,CAE5B,CA0BA,SAAS,EAAiB,CAAa,CAAE,CAAqB,CAAE,CAAqB,CAAE,CAAoB,SACzG,AAAI,MAAmC,EAA3B,SACR,EAAQ,CAAC,IAA2B,IADR,OAEzB,KAD0B,IAEnC,CA4EO,eAAe,IACpB,IAAM,EAAM,IAAI,KACV,EAAQ,CAAE,KAAM,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,EAAK,IAAK,GAAI,CAAI,EAC5C,EAAe,CAAA,EAAA,EAAA,mBAAA,AAAmB,IAClC,EAAmB,CAAA,EAAA,EAAA,uBAAuB,AAAvB,IAEnB,CAAC,EAAW,EAAQ,EAAY,EAAc,CAAG,MAAM,QAAQ,GAAG,CAAC,CACvE,CAAA,EAAA,EAAA,gBAAA,AAAgB,EAAC,OACjB,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,CAAE,KAAM,EAAG,SAAU,CAAE,GACpC,CAAA,EAAA,EAAA,aAAA,AAAa,EAAC,GACd,CAAA,EAAA,EAAA,gBAAA,AAAgB,EAAC,GAClB,EAEK,EArHR,AAqHwB,SArHf,AAAuB,CAA0C,EACxE,GAAI,EAAO,MAAM,CAAG,EAAG,OAAO,EAC9B,IAAM,EAAQ,EAAO,GAAG,CAAC,AAAC,GAAU,EAAM,KAAK,EAG/C,OAAO,EAFQ,EAAe,EAAO,GACvB,EAAe,EAAM,CACd,IADmB,CAAC,EAAG,CAAC,AAChB,GADoB,GAEnD,EA+G+C,EAAU,MAAM,CAAC,OAAO,EAC/D,EAAmB,AA9G3B,SAAS,AAA0B,CAAgF,EACjH,GAAI,EAAO,MAAM,CAAG,GAAI,OAAO,EAC/B,IAAM,EAAS,EAAO,GAAG,CAAC,AAAC,GAAU,EAAM,KAAK,EAGhD,OAAO,EAFQ,EAAe,EAAO,KAAK,CAAC,CAAC,CAEvB,EAF2B,GAClC,EAAe,CACA,CADO,KAAK,CAAC,CAAC,GAAI,CAAC,GAAI,GAEtD,EAwGqD,EAAc,cAAc,CAAC,MAAM,EAChF,EAAe,AAvGvB,SAAS,AAA0B,CAAgC,EACjE,IAAM,EAAe,EAAO,MAAM,CAAC,AAAC,GAAU,EAAM,YAAY,CAAG,GACnE,GAAI,CAAC,EAAa,MAAM,CAAE,OAAO,EACjC,IAAM,EAAgB,EAAa,MAAM,CAAC,CAAC,EAAK,IAAU,EAAM,EAAM,YAAY,CAAE,GAC9E,EAAY,EAAa,MAAM,CAAC,CAAC,EAAK,IAAU,EAAM,EAAM,WAAW,CAAE,GAC/E,OAAO,AAAkB,MAAI,EAAI,EAAY,CAC/C,EAiGiD,EAAW,MAAM,EAE1D,EAAW,EAAW,MAAM,CAC/B,KAAK,GACL,IAAI,CAAC,CAAC,EAAG,IAAM,EAAE,YAAY,CAAG,EAAE,YAAY,CAAC,CAAC,EAAE,CAC/C,EAAU,EAAc,QAAQ,CAAC,IAAI,CAAC,EAAE,CACxC,EAAW,EAAO,MAAM,CAAC,EAAE,CAE3B,EAjGR,AAiGqB,SAjGZ,AAAgB,CAOxB,EACC,IAAM,EAAiC,EAAE,CA4CzC,GA1CA,EAAW,IAAI,CAAC,CACd,MAAO,kBACP,YACE,EAAO,aAAa,GAAG,EACnB,gEACA,EAAO,aAAa,CAAG,CAAC,IACtB,oFACA,iEACR,OAAQ,EAAiB,EAAO,aAAa,CAAE,WAAY,WAAY,UACzE,GAEA,EAAW,IAAI,CAAC,CACd,MAAO,qBACP,YACE,EAAO,gBAAgB,CAtEF,EAsEK,EACtB,mFACA,EAAO,gBAAgB,CAAG,CAAC,IACzB,oFACA,8CACR,OAAQ,EAAiB,EAAO,gBAAgB,CAAE,WAAY,WAAY,UAC5E,GAEA,EAAW,IAAI,CAAC,CACd,MAAO,eACP,YACE,EAAO,YAAY,EAAI,IACnB,4EACA,EAAO,YAAY,EAAI,IACrB,2EACA,4DACR,OACE,EAAO,YAAY,EAAI,IAAO,WAAa,EAAO,YAAY,EAAI,IAAO,WAAa,SAC1F,GAEI,EAAO,QAAQ,EAAE,AACnB,EAAW,IAAI,CAAC,CACd,MAAO,CAAA,EAAG,EAAO,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,CAC7C,YAAa,CAAC,oCAAoC,EAAE,EAAO,QAAQ,CAAC,UAAU,CAAC,cAAc,GAAG,oDAAoD,CAAC,CACrJ,OAAQ,UACV,GAGE,EAAO,QAAQ,CAAE,CACnB,IAAM,EAAY,EAAO,QAAQ,CAAC,YAAY,CAC1C,KAAK,KAAK,CAAE,EAAO,QAAQ,CAAC,WAAW,CAAG,EAAO,QAAQ,CAAC,YAAY,CAAI,KAC1E,KACJ,EAAW,IAAI,CAAC,CACd,MAAO,CAAA,EAAG,EAAO,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAChD,YAAa,CAAC,kCAAkC,EAAE,EAAO,QAAQ,CAAC,YAAY,CAAC,cAAc,GAAG,WAAW,EAAE,EAAY,CAAC,IAAI,EAAE,EAAU,UAAU,CAAC,CAAG,GAAG,CAAC,CAAC,CAC7J,OAAQ,UACV,EACF,CAUA,OARI,EAAO,OAAO,EAAE,AAClB,EAAW,IAAI,CAAC,CACd,MAAO,wBACP,YAAa,CAAC,CAAC,EAAE,EAAO,OAAO,CAAC,KAAK,CAAC,qBAAqB,EAAE,EAAO,OAAO,CAAC,SAAS,CAAC,cAAc,GAAG,2CAA2C,CAAC,CACnJ,OAAQ,SACV,GAGK,CACT,EAyBqC,eACjC,mBACA,EACA,eACA,SAAU,EACN,CACE,KAAM,EAAS,IAAI,CACnB,WAAY,EAAS,UACvB,AADiC,EAEjC,OACJ,SAAU,EACN,CACE,KAAM,EAAS,IAAI,CACnB,aAAc,EAAS,YAAY,CACnC,YAAa,EAAS,WAAW,CACjC,aAAc,EAAS,YAAY,AACrC,OACA,UACJ,CACF,GAEA,MAAO,CACL,YAAa,EAAI,WAAW,SAC5B,YACA,SACA,EACA,OAAQ,CAAE,QAAS,EAAc,KAAM,CAAW,EAClD,UAAW,CAAE,QAAS,EAAkB,KAAM,CAAc,EAC5D,QAAS,eACP,mBACA,eACA,CACF,aACA,CACF,CACF,CD5MA,IAAA,EAAA,EAAA,CAAA,CAAA,OAIA,SAAS,EAAe,CAAa,SACnC,AAAI,AAAC,OAAO,QAAQ,CAAC,IAAoB,GAAG,CAAb,EAExB,CAAA,EAAG,AADG,EAAQ,EAAI,IAAM,GACrB,EAAO,CAAS,IAAR,CAAQ,CAAG,CAAE,OAAO,CAAC,GAAG,oBAAoB,CAAC,CAFZ,iBAGrD,CAEA,IAAM,EAAuC,CAC3C,SAAU,8CACV,SAAU,wCACV,QAAS,0CACX,EAEA,SAAS,EAAY,OAAE,CAAK,OAAE,CAAK,CAAoC,EACrE,GAAI,CAAC,OAAO,QAAQ,CAAC,GAAQ,OAAO,KACpC,IAAM,EAAU,KAAK,GAAG,CAAC,EAAG,KAAK,GAAG,CAAC,IAAM,IAC3C,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sBAAsB,MAAO,CAAE,MAAO,CAAA,EAAa,IAAV,EAAc,CAAC,CAAC,CAAE,gBAAiB,CAAM,KAGvG,CAae,eAAe,YAC5B,QALM,EAKA,EAAO,MAAM,IACb,EAAiB,EAAK,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,KAAK,CAAC,EAAG,GAClE,EAAiB,EAAK,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,KAAK,CAAC,EAAG,GAClE,EAAY,EAAK,SAAS,CAAC,IAAI,CAAC,OAAO,CACvC,EACJ,EAAK,MAAM,CAAC,OAAO,CAAC,WAAW,CAAG,EAAI,EAAK,MAAM,CAAC,OAAO,CAAC,YAAY,CAAG,EAAK,MAAM,CAAC,OAAO,CAAC,WAAW,CAAG,EACvG,EAAe,EAAK,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CACpD,EAAa,EAAK,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAChD,EAAW,EAAe,EAAI,EAAa,EAAe,EAC1D,GApBA,EAAwB,SAoBV,CApBP,OADS,AACF,EAoBe,EAAK,CArBE,UAqBS,EApBV,IAAI,KAAK,GAAS,EACpD,IAAI,KAAK,cAAc,CAAC,QAAS,CAAE,UAAW,SAAU,UAAW,OAAQ,GAAG,MAAM,CAAC,IAoBtF,EAAmB,EAAK,MAAM,CAAC,OAAO,CAAC,IAAI,EAAI,EAAK,KAAK,CAAC,IAAI,CAC9D,EAAiB,EAAK,MAAM,CAAC,OAAO,CAAC,EAAE,EAAI,EAAK,KAAK,CAAC,EAAE,CACxD,EAAuB,EAAK,SAAS,CAAC,OAAO,CAAC,IAAI,EAAI,EAAK,KAAK,CAAC,IAAI,CACrE,EAAqB,EAAK,SAAS,CAAC,OAAO,CAAC,EAAE,EAAI,EAAK,KAAK,CAAC,EAAE,CAE/D,EAAe,CACnB,CACE,MAAO,qBACP,MAAO,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAK,SAAS,CAAC,IAAI,CAAC,QAAQ,EAClD,OAAQ,EAAe,EAAK,OAAO,CAAC,aAAa,CACnD,EACA,CACE,MAAO,gBACP,MAAO,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EAAK,SAAS,CAAC,IAAI,CAAC,YAAY,EACpD,OAAQ,CAAA,EAAG,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EAAK,MAAM,CAAC,OAAO,CAAC,WAAW,EAAE,MAAM,CAAC,AAClE,EACA,CACE,MAAO,eACP,MAAO,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EAAK,SAAS,CAAC,IAAI,CAAC,WAAW,EACnD,OAAQ,CAAA,EAAG,CAAA,EAAA,EAAA,aAAa,AAAb,EAAc,EAAK,OAAO,CAAC,YAAY,CAAE,GAAG,aAAa,CAAC,AACvE,EACA,CACE,MAAO,iBACP,MAAO,CAAA,EAAA,EAAA,YAAY,AAAZ,EAAa,EAAK,SAAS,CAAC,IAAI,CAAC,kBAAkB,EAC1D,OAAQ,EAAe,EAAK,OAAO,CAAC,gBAAgB,CACtD,EACD,CAED,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CACT,QAAQ,eACR,MAAM,sBACN,YAAY,wEACZ,QAAS,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,oBAAoB,CAAA,CAAA,YAE9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,cAAc,CAAA,CAAC,MAAO,EAAc,QAAS,MAGhD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,MAAM,qBAAqB,YAAY,6DAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCACZ,EAAK,UAAU,CAAC,GAAG,CAAC,AAAC,GACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAW,CAAC,4CAA4C,EAAE,CAAY,CAAC,EAAU,MAAM,CAAC,EAAI,EAAa,OAAO,CAAA,CAAE,WAElH,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAyB,EAAU,KAAK,GACrD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kCAA0B,EAAU,WAAW,KAJvD,EAAU,KAAK,OAU5B,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAU,sCACjB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,MAAM,eAAe,YAAY,wDACrC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wCAA+B,iBAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iDAAyC,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EAAK,MAAM,CAAC,OAAO,CAAC,WAAW,IAClG,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kCAAyB,uBAExC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wCAA+B,kBAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iDAAyC,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EAAK,MAAM,CAAC,OAAO,CAAC,YAAY,IACnG,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,mCAAyB,6BAA2B,CAAA,EAAA,EAAA,aAAA,AAAa,EAAC,GAAY,OAC3F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAY,MAAO,EAAY,MAAM,eAExC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wCAA+B,uBAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iDACV,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAK,MAAM,CAAC,OAAO,CAAC,oBAAoB,IAE1D,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kCAAyB,mCAK5C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,MAAM,cAAc,YAAY,mDACpC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wCAA+B,kBAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iDAAyC,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,KACrE,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,mCACV,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EAAK,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,sBAGxD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wCAA+B,gBAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iDAAyC,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,KACrE,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,mCAA0B,CAAA,EAAA,EAAA,aAAA,AAAa,EAAC,GAAU,wBAC/D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAY,MAAO,EAAU,MAAM,eAEtC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wCAA+B,sBAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iDAAyC,CAAA,EAAA,EAAA,aAAA,AAAa,EAAC,EAAK,OAAO,CAAC,YAAY,IAC7F,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kCAAyB,yBACtC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAY,MAAO,EAAK,OAAO,CAAC,YAAY,CAAE,MAAM,oBAK3D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,MAAM,iBAAiB,YAAY,8CACvC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,8BACZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,wCAA+B,uBAC7C,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,0BAAkB,OAElC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,wCAA+B,qBAC7C,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,2BACX,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAK,KAAK,CAAC,IAAI,EAAE,MAAU,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAK,KAAK,CAAC,EAAE,QAGnE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,wCAA+B,kBAC7C,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,2BACX,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,GAAkB,MAAU,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,SAGvD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,wCAA+B,qBAC7C,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,2BACX,CAAA,EAAA,EAAA,UAAU,AAAV,EAAW,GAAsB,MAAU,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,iBAOjE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CACH,MAAM,sBACN,YAAY,uFAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,CACd,KAAM,EAAK,SAAS,CAAC,MAAM,CAAC,OAAO,CACnC,MAAO,CACL,CAAE,QAAS,QAAS,MAAO,UAAW,KAAM,kBAAmB,EAC/D,CAAE,QAAS,UAAW,MAAO,UAAW,KAAM,cAAe,EAC7D,CAAE,QAAS,WAAY,MAAO,UAAW,KAAM,UAAW,EAC3D,KAIL,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAU,sCACjB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CACH,MAAM,aACN,YAAY,4DACZ,QACE,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,mCAAyB,sBAChB,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAK,MAAM,CAAC,OAAO,CAAC,oBAAoB,cAI/E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,WACJ,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,WACJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,EAAE,CAAA,UAAC,SACJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,EAAE,CAAA,UAAC,UACJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,EAAE,CAAA,UAAC,mBACJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,EAAE,CAAA,UAAC,iBAEN,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UACH,EAAK,MAAM,CAAC,MAAM,CAAC,GAAG,CAAE,AAAD,GACtB,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,EAAE,CAAA,CAAC,UAAU,wCAAgC,EAAM,IAAI,GACxD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,EAAE,CAAA,UAAE,EAAM,KAAK,EAAI,MACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,EAAE,CAAA,UAAE,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAM,UAAU,IACpC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,EAAE,CAAA,UAAE,EAAM,YAAY,CAAG,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAM,YAAY,EAAI,eAJpD,EAAM,EAAE,YAY3B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CACH,MAAM,6BACN,YAAY,qEACZ,QACE,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,mCACV,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EAAK,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,cAAY,IAClE,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EAAK,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,oBAIvD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,WACJ,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,WACJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,EAAE,CAAA,UAAC,SACJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,EAAE,CAAA,UAAC,UACJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,EAAE,CAAA,UAAC,YACJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,EAAE,CAAA,UAAC,aACJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,EAAE,CAAA,UAAC,qBAEN,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UACH,EAAK,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,EAAG,GAAG,GAAG,CAAC,AAAC,GACxC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,EAAE,CAAA,CAAC,UAAU,wCAAgC,EAAM,IAAI,GACxD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,EAAE,CAAA,CAAC,UAAU,mCACX,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAM,SAAS,EAAE,MAAI,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EAAM,OAAO,KAE3D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,EAAE,CAAA,UAAE,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EAAM,WAAW,IACnC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,EAAE,CAAA,WACA,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EAAM,YAAY,EAAE,KACjC,CAAA,EAAA,EAAA,aAAA,AAAa,EAAC,EAAM,YAAY,CAAG,EAAM,WAAW,CAAG,EAAM,YAAY,CAAG,GAAG,OAElF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,EAAE,CAAA,UAAE,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAM,YAAY,MAV/B,EAAM,EAAE,eAmB7B,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAU,sCACjB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,MAAM,oBAAoB,YAAY,qDAC1C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,CAChB,KAAM,EACN,KAAM,CAAC,CAAE,QAAS,UAAW,MAAO,UAAW,KAAM,cAAe,EAAE,CACtE,OAAQ,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kCAAyB,gCAGlD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,MAAM,oBAAoB,YAAY,0DAC1C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,CAChB,KAAM,EACN,KAAM,CACJ,CAAE,QAAS,QAAS,MAAO,UAAW,KAAM,OAAQ,EACpD,CAAE,QAAS,MAAO,MAAO,UAAW,KAAM,KAAM,EACjD,CACD,QAAS,GACT,OAAQ,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kCAAyB,mDAKpD,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAU,sCACjB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,MAAM,8CACV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,CAChB,KAAM,EAAK,MAAM,CAAC,MAAM,CAAC,YAAY,CACrC,KAAM,CAAC,CAAE,QAAS,QAAS,MAAO,UAAW,KAAM,YAAa,EAAE,CAClE,OAAQ,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kCAAyB,wCAGlD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,MAAM,6BACV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,iBAAiB,CAAA,CAChB,KAAM,EAAK,MAAM,CAAC,MAAM,CAAC,gBAAgB,CACzC,OAAQ,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kCAAyB,4CAKpD,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,UAAU,sCACjB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CACH,UAAU,gBACV,MAAM,0BACN,YAAY,oDAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,CACd,KAAM,EAAK,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAC/C,MAAO,CAAC,CAAE,QAAS,QAAS,MAAO,UAAW,KAAM,UAAW,EAAE,CACjE,OACE,EAAK,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CACtC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gCAAwB,EAAK,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,GAE7E,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kCAAyB,0CAK9C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,MAAM,uBAAuB,YAAY,oDAC7C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wCAA+B,UAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iDAAyC,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EAAU,KAAK,IAClF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kCAAyB,iCAExC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wCAA+B,aAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iDAAyC,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EAAU,QAAQ,IACrF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kCAA0B,EAAe,EAAK,OAAO,CAAC,gBAAgB,OAErF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wCAA+B,cAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iDAAyC,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EAAU,SAAS,IACtF,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kCAAyB,2BAExC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wCAA+B,mBAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kDAjTnB,AAiT4D,EAjTlD,KAAK,KAAK,CAAC,CADN,EAkT2D,EAAU,CAlTxD,oBAkT6E,EAjT5E,MACnB,KAAK,KAAK,CAAC,EAAQ,IAC5B,CAAA,EAAG,EAAQ,EAAE,EAAE,EAAQ,QAAQ,GAAG,QAAQ,CAAC,EAAG,KAAK,CAAC,CAAC,IAgThD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kCAAyB,mCAM9C,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,CAAC,MAAM,YAAY,YAAY,wCAClC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,WACJ,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,WACJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,EAAE,CAAA,UAAC,SACJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,EAAE,CAAA,UAAC,UACJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,EAAE,CAAA,UAAC,iBAEN,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,UACH,EAAK,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,AAAC,GACtC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,EAAE,CAAA,CAAC,UAAU,uBAAe,EAAI,IAAI,GACrC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,EAAE,CAAA,UAAE,EAAI,KAAK,GACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,EAAE,CAAA,UAAE,CAAA,EAAA,EAAA,YAAA,AAAY,EAAC,EAAI,SAAS,MAHxB,CAAA,EAAG,EAAI,IAAI,CAAC,CAAC,EAAE,EAAI,KAAK,CAAA,CAAE,UAS1C,EAAK,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CACjC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qCAA6B,EAAK,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,GAC1E,UAIZ,kCA/WuB","ignoreList":[0]}