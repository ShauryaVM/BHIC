module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},50645,a=>{a.n(a.i(27572))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},70844,a=>{a.n(a.i(92359))},31290,96818,18956,99602,10236,a=>{"use strict";let b=Symbol.for("constructDateFrom");function c(a,c){return"function"==typeof a?a(c):a&&"object"==typeof a&&b in a?a[b](c):a instanceof Date?new a.constructor(c):new Date(c)}function d(a,b){return c(b||a,a)}function e(a,b,e){let f=d(a,e?.in);return isNaN(b)?c(e?.in||a,NaN):(b&&f.setDate(f.getDate()+b),f)}function f(a,b,c){return e(a,-b,c)}a.s(["constructFromSymbol",0,b,"millisecondsInDay",0,864e5,"millisecondsInMinute",0,6e4,"millisecondsInWeek",0,6048e5],96818),a.s(["constructFrom",()=>c],18956),a.s(["toDate",()=>d],99602),a.s(["addDays",()=>e],10236),a.s(["subDays",()=>f],31290)},35330,84347,14962,a=>{"use strict";var b=a.i(7997);let c=function(){for(var a,b,c=0,d="",e=arguments.length;c<e;c++)(a=arguments[c])&&(b=function a(b){var c,d,e="";if("string"==typeof b||"number"==typeof b)e+=b;else if("object"==typeof b)if(Array.isArray(b)){var f=b.length;for(c=0;c<f;c++)b[c]&&(d=a(b[c]))&&(e&&(e+=" "),e+=d)}else for(d in b)b[d]&&(e&&(e+=" "),e+=d);return e}(a))&&(d&&(d+=" "),d+=b);return d};function d({title:a,description:d,className:e,children:f,actions:g}){return(0,b.jsxs)("section",{className:c("card p-6 space-y-4",e),children:[(a||d||g)&&(0,b.jsxs)("header",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[a?(0,b.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:a}):null,d?(0,b.jsx)("p",{className:"text-sm text-slate-500",children:d}):null]}),g]}),(0,b.jsx)("div",{children:f})]})}function e({eyebrow:a,title:d,description:e,actions:f,children:g,className:h}){return(0,b.jsxs)("section",{className:c("relative overflow-hidden rounded-[32px] border border-white/60 bg-white/80 p-6 shadow-[0px_25px_60px_rgba(15,23,42,0.08)] backdrop-blur",h),children:[(0,b.jsxs)("div",{className:"pointer-events-none absolute inset-0",children:[(0,b.jsx)("div",{className:"absolute -top-16 -right-8 h-48 w-48 rounded-full bg-brand/15 blur-3xl"}),(0,b.jsx)("div",{className:"absolute bottom-[-60px] left-[-40px] h-44 w-44 rounded-full bg-accent/10 blur-3xl"})]}),(0,b.jsxs)("div",{className:"relative z-10 flex flex-wrap items-start gap-6",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[a?(0,b.jsx)("span",{className:"inline-flex items-center rounded-full border border-slate-100/70 bg-slate-50/80 px-3 py-1 text-xs font-semibold uppercase tracking-[0.16em] text-slate-500",children:a}):null,(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-semibold leading-tight text-slate-900",children:d}),e?(0,b.jsx)("p",{className:"mt-2 max-w-3xl text-sm text-slate-600",children:e}):null]})]}),f?(0,b.jsx)("div",{className:"ml-auto flex flex-col items-stretch gap-3",children:f}):null]}),g?(0,b.jsx)("div",{className:"relative z-10 mt-6",children:g}):null]})}function f({items:a,columns:d=3}){return(0,b.jsx)("div",{className:c("grid gap-4 text-sm text-slate-600",2===d?"sm:grid-cols-2":4===d?"sm:grid-cols-2 lg:grid-cols-4":"sm:grid-cols-3"),children:a.map(a=>(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-100/70 bg-white/90 px-4 py-3 shadow-inner shadow-slate-200/70",children:[(0,b.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:a.label}),(0,b.jsx)("p",{className:"mt-1 text-base font-semibold text-slate-900",children:a.value}),a.helper?(0,b.jsx)("p",{className:"mt-0.5 text-xs text-slate-500",children:a.helper}):null]},`${a.label}-${a.value}`))})}a.s(["default",0,c],84347),a.s(["Card",()=>d],35330),a.s(["PageHeader",()=>e,"PageHeaderMeta",()=>f],14962)},43116,a=>{"use strict";function b(a,c="USD",d=0){return new Intl.NumberFormat("en-US",{style:"currency",currency:c,maximumFractionDigits:d}).format(a)}function c(a,b=0){return new Intl.NumberFormat("en-US",{maximumFractionDigits:b}).format(a)}function d(a,b=1){return new Intl.NumberFormat("en-US",{style:"percent",maximumFractionDigits:b}).format(a)}function e(a,b={month:"short",day:"numeric",year:"numeric"}){let c="string"==typeof a?new Date(a):a;return new Intl.DateTimeFormat("en-US",b).format(c)}a.s(["formatCurrency",()=>b,"formatDate",()=>e,"formatNumber",()=>c,"formatPercent",()=>d])},48461,a=>{"use strict";var b=a.i(99602);function c(a,c){let d=(0,b.toDate)(a,c?.in);return d.setHours(0,0,0,0),d}a.s(["startOfDay",()=>c])},45310,a=>{"use strict";var b=a.i(7997),c=a.i(84347);function d({children:a,className:d}){return(0,b.jsx)("table",{className:(0,c.default)("min-w-full divide-y divide-slate-200",d),children:a})}function e({children:a}){return(0,b.jsx)("thead",{className:"bg-slate-50",children:(0,b.jsx)("tr",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500",children:a})})}function f({children:a}){return(0,b.jsx)("tbody",{className:"divide-y divide-slate-100 bg-white text-sm text-slate-700",children:a})}function g({children:a,align:d="left",className:e}){return(0,b.jsx)("th",{scope:"col",className:(0,c.default)("px-4 py-3",{"text-left":"left"===d,"text-center":"center"===d,"text-right":"right"===d},e),children:a})}function h({children:a,align:d="left",className:e}){return(0,b.jsx)("td",{className:(0,c.default)("px-4 py-3",{"text-left":"left"===d,"text-center":"center"===d,"text-right":"right"===d},e),children:a})}a.s(["TBody",()=>f,"TD",()=>h,"TH",()=>g,"THead",()=>e,"Table",()=>d])},48344,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call BarChartComponent() from the server but BarChartComponent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/charts/bar-chart.tsx <module evaluation>","BarChartComponent");a.s(["BarChartComponent",0,b])},93003,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call BarChartComponent() from the server but BarChartComponent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/charts/bar-chart.tsx","BarChartComponent");a.s(["BarChartComponent",0,b])},9170,a=>{"use strict";a.i(48344);var b=a.i(93003);a.n(b)},23529,a=>{"use strict";var b=a.i(10236),c=a.i(48461),d=a.i(31290),e=a.i(66518);async function f(a={}){let b=function(a){if(!a.from&&!a.to)return{};let b={};return(a.from||a.to)&&(b.startDate={...a.from?{gte:a.from}:{},...a.to?{lte:a.to}:{}}),b}(a);try{let a=(await e.prisma.event.findMany({where:b,orderBy:{startDate:"desc"}})).map(a=>{let b,c;return{...a,grossRevenue:(b=a.grossRevenue,Number(b??0)),netRevenue:(c=a.netRevenue,Number(c??0))}}),c=new Date,d=a.filter(a=>a.startDate>=c).length,f=a.length-d,g=a.reduce((a,b)=>a+b.ticketsSold,0),h=a.reduce((a,b)=>a+Number(b.grossRevenue??0),0),i=a.reduce((a,b)=>a+Number(b.netRevenue??0),0);return{events:a,summary:{upcomingEvents:d,pastEvents:f,ticketsSold:g,grossRevenue:h,netRevenue:i},charts:{ticketsPerEvent:a.map(a=>({name:a.name,tickets:a.ticketsSold})),revenuePerEvent:a.map(a=>({name:a.name,gross:Number(a.grossRevenue??0),net:Number(a.netRevenue??0)}))}}}catch(a){return console.warn("Unable to load events data, returning empty snapshot",a instanceof Error?a.message:a),{events:[],summary:{upcomingEvents:0,pastEvents:0,ticketsSold:0,grossRevenue:0,netRevenue:0},charts:{ticketsPerEvent:[],revenuePerEvent:[]}}}}function g(){return{from:(0,d.subDays)((0,c.startOfDay)(new Date),90),to:(0,b.addDays)((0,c.startOfDay)(new Date),180)}}a.s(["defaultEventFilters",()=>g,"getEventsData",()=>f])},36380,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call EventsFilters() from the server but EventsFilters is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(dashboard)/events/_components/events-filters.tsx <module evaluation>","EventsFilters");a.s(["EventsFilters",0,b])},12013,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call EventsFilters() from the server but EventsFilters is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(dashboard)/events/_components/events-filters.tsx","EventsFilters");a.s(["EventsFilters",0,b])},20300,a=>{"use strict";a.i(36380);var b=a.i(12013);a.n(b)},73822,a=>{"use strict";var b=a.i(7997),c=a.i(35330),d=a.i(45310),e=a.i(9170),f=a.i(20300),g=a.i(23529),h=a.i(43116),i=a.i(14962);async function j({searchParams:a}){let j=await Promise.resolve(a)??{},k=(0,g.defaultEventFilters)(),l=a=>{if(!a)return;let b=new Date(a);return Number.isNaN(b.getTime())?void 0:b},m=l(j.from)??k.from,n=l(j.to)??k.to,o=await (0,g.getEventsData)({from:m,to:n});return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsx)(i.PageHeader,{eyebrow:"Experiences",title:"Events + experiences",description:"Performance snapshot for Eventbrite programs hosted by BHIC.",children:(0,b.jsx)(i.PageHeaderMeta,{items:[{label:"Upcoming events",value:(0,h.formatNumber)(o.summary.upcomingEvents)},{label:"Past events",value:(0,h.formatNumber)(o.summary.pastEvents)},{label:"Tickets sold",value:(0,h.formatNumber)(o.summary.ticketsSold)},{label:"Gross revenue",value:(0,h.formatCurrency)(o.summary.grossRevenue)}],columns:4})}),(0,b.jsx)(f.EventsFilters,{initialFrom:m?.toISOString().slice(0,10),initialTo:n?.toISOString().slice(0,10)}),(0,b.jsx)(c.Card,{title:"Event performance",description:"Revenue and tickets by event",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(d.Table,{children:[(0,b.jsxs)(d.THead,{children:[(0,b.jsx)(d.TH,{children:"Name"}),(0,b.jsx)(d.TH,{children:"Dates"}),(0,b.jsx)(d.TH,{children:"Venue"}),(0,b.jsx)(d.TH,{children:"Tickets sold"}),(0,b.jsx)(d.TH,{children:"Capacity"}),(0,b.jsx)(d.TH,{children:"Gross revenue"}),(0,b.jsx)(d.TH,{children:"Net revenue"})]}),(0,b.jsx)(d.TBody,{children:o.events.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)(d.TD,{className:"font-semibold text-slate-900",children:a.name}),(0,b.jsx)(d.TD,{children:(0,b.jsxs)("span",{className:"text-sm text-slate-600",children:[(0,h.formatDate)(a.startDate)," â€“ ",(0,h.formatDate)(a.endDate)]})}),(0,b.jsx)(d.TD,{children:a.venue??"TBD"}),(0,b.jsx)(d.TD,{children:(0,h.formatNumber)(a.ticketsSold)}),(0,b.jsx)(d.TD,{children:(0,h.formatNumber)(a.ticketsTotal)}),(0,b.jsx)(d.TD,{children:(0,h.formatCurrency)(a.grossRevenue)}),(0,b.jsx)(d.TD,{children:(0,h.formatCurrency)(a.netRevenue)})]},a.id))})]})})}),(0,b.jsxs)("section",{className:"grid gap-4 lg:grid-cols-2",children:[(0,b.jsx)(c.Card,{title:"Tickets per event",children:(0,b.jsx)(e.BarChartComponent,{data:o.charts.ticketsPerEvent,bars:[{dataKey:"tickets",color:"#1d4ed8",name:"Tickets sold"}]})}),(0,b.jsx)(c.Card,{title:"Revenue per event",children:(0,b.jsx)(e.BarChartComponent,{data:o.charts.revenuePerEvent,bars:[{dataKey:"gross",color:"#0f172a",name:"Gross"},{dataKey:"net",color:"#059669",name:"Net"}],stacked:!1})})]})]})}a.s(["default",()=>j,"dynamic",0,"force-dynamic"])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__94b8d599._.js.map