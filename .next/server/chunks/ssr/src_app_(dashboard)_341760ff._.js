module.exports=[44568,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call DashboardRangeSelector() from the server but DashboardRangeSelector is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(dashboard)/range-selector.tsx <module evaluation>","DashboardRangeSelector");a.s(["DashboardRangeSelector",0,b])},42942,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call DashboardRangeSelector() from the server but DashboardRangeSelector is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(dashboard)/range-selector.tsx","DashboardRangeSelector");a.s(["DashboardRangeSelector",0,b])},92036,a=>{"use strict";a.i(44568);var b=a.i(42942);a.n(b)},75601,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call IntegrationSyncPanel() from the server but IntegrationSyncPanel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(dashboard)/_components/integration-sync-panel.tsx <module evaluation>","IntegrationSyncPanel");a.s(["IntegrationSyncPanel",0,b])},96260,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call IntegrationSyncPanel() from the server but IntegrationSyncPanel is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(dashboard)/_components/integration-sync-panel.tsx","IntegrationSyncPanel");a.s(["IntegrationSyncPanel",0,b])},64457,a=>{"use strict";a.i(75601);var b=a.i(96260);a.n(b)},36568,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call ManualImportForm() from the server but ManualImportForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(dashboard)/_components/manual-import-form.tsx <module evaluation>","ManualImportForm");a.s(["ManualImportForm",0,b])},47092,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call ManualImportForm() from the server but ManualImportForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(dashboard)/_components/manual-import-form.tsx","ManualImportForm");a.s(["ManualImportForm",0,b])},14073,a=>{"use strict";a.i(36568);var b=a.i(47092);a.n(b)},843,a=>{"use strict";var b=a.i(7997),c=a.i(717);let d=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f=(0,c.forwardRef)(({color:a="currentColor",size:b=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,c.createElement)("svg",{ref:l,...e,width:b,height:b,stroke:a,strokeWidth:g?24*Number(f)/Number(b):f,className:d("lucide",h),...k},[...j.map(([a,b])=>(0,c.createElement)(a,b)),...Array.isArray(i)?i:[i]])),g=(a,b)=>{let e=(0,c.forwardRef)(({className:e,...g},h)=>(0,c.createElement)(f,{ref:h,iconNode:b,className:d(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,e),...g}));return e.displayName=`${a}`,e},h=g("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]),i=g("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),j=g("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]),k=g("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);var l=a.i(35330),m=a.i(58388),n=a.i(35988),o=a.i(43116),p=a.i(14962),q=a.i(14355),r=a.i(92036),s=a.i(64457),t=a.i(95936),u=a.i(14073);function v(a){if(!a)return"No successful sync detected.";if(a.error)return`Last attempt failed: ${a.error}`;let b=new Date(a.timestamp),c=Number.isNaN(b.getTime())?"Unknown time":b.toLocaleString();return`Last automatic sync: ${c}`}function w({statuses:a}){let c=(0,q.isIntegrationStale)(a.etapestry),d=(0,q.isIntegrationStale)(a.eventbrite);return(0,b.jsxs)(l.Card,{className:"border-2 border-dashed border-amber-400 bg-amber-50/40",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-xs font-semibold uppercase tracking-widest text-amber-600",children:"Manual import required"}),(0,b.jsx)("h2",{className:"text-2xl font-semibold text-slate-900",children:"Vendor APIs are unavailable"}),(0,b.jsx)("p",{className:"text-sm text-slate-700",children:"Automated syncs from eTapestry and Eventbrite are failing. Until Blackbaud/Eventbrite restore API access, download the data exports and upload them here so dashboards stay up to date."}),(0,b.jsxs)("ul",{className:"mt-2 space-y-1 text-sm text-slate-700",children:[(0,b.jsxs)("li",{children:["• eTapestry: ",v(a.etapestry)]}),(0,b.jsxs)("li",{children:["• Eventbrite: ",v(a.eventbrite)]})]})]}),(0,b.jsxs)("div",{className:"mt-6 grid gap-6 md:grid-cols-2",children:[(0,b.jsxs)("div",{className:"rounded-2xl border border-amber-200 bg-white/80 p-5 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-semibold uppercase tracking-widest text-slate-500",children:"eTapestry pledges"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:c?"Sync overdue":"Sync healthy"})]}),(0,b.jsx)(t.default,{href:"/manual-import/etapestry-template.csv",className:"text-xs font-semibold text-brand hover:underline",target:"_blank",children:"Download template"})]}),(0,b.jsxs)("ol",{className:"mt-3 list-decimal space-y-1.5 pl-4 text-sm text-slate-600",children:[(0,b.jsx)("li",{children:"Log into eTapestry → Reports → Queries → run the “BHIC pledge export” query."}),(0,b.jsx)("li",{children:"Export the results as CSV with the columns shown in the template."}),(0,b.jsx)("li",{children:"Upload the CSV below to load pledges and donor updates into BHIC Dashboard."})]}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(u.ManualImportForm,{source:"etapestry",label:"pledges"})})]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-amber-200 bg-white/80 p-5 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-semibold uppercase tracking-widest text-slate-500",children:"Eventbrite events"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:d?"Sync overdue":"Sync healthy"})]}),(0,b.jsx)(t.default,{href:"/manual-import/eventbrite-template.csv",className:"text-xs font-semibold text-brand hover:underline",target:"_blank",children:"Download template"})]}),(0,b.jsxs)("ol",{className:"mt-3 list-decimal space-y-1.5 pl-4 text-sm text-slate-600",children:[(0,b.jsx)("li",{children:"In Eventbrite, go to Organization Events → Reports → “Event summary”."}),(0,b.jsx)("li",{children:"Export the report as CSV, matching the template columns."}),(0,b.jsx)("li",{children:"Upload the CSV to refresh event counts, tickets sold, and revenue."})]}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(u.ManualImportForm,{source:"eventbrite",label:"events"})})]})]})]})}async function x({searchParams:a}){let c=await a,d="12m"===(Array.isArray(c?.range)?c?.range[0]:c?.range)?"12m":"ytd",e=await (0,n.getDashboardData)(d),f=await (0,q.getIntegrationStatuses)(),g=(0,q.isIntegrationStale)(f.etapestry)||(0,q.isIntegrationStale)(f.eventbrite);return(0,b.jsxs)("div",{className:"space-y-10",children:[(0,b.jsx)(p.PageHeader,{eyebrow:"Executive view",title:"Mission Control",description:"Funds, community engagement, and digital reach in one place.",actions:(0,b.jsx)(r.DashboardRangeSelector,{currentRange:d}),children:(0,b.jsx)(p.PageHeaderMeta,{items:[{label:"Current range",value:"12m"===d?"Last 12 months":"Year to date"},{label:"Data sources",value:"eTapestry · Eventbrite · GA4",helper:"Synced securely via service accounts"},{label:"Refresh cadence",value:"Every 60 minutes",helper:"Automatic background sync"}]})}),g?(0,b.jsx)(w,{statuses:f}):null,(0,b.jsx)(l.Card,{title:"Data pipeline",description:"Manually refresh eTapestry and Eventbrite data or review last sync status.",children:(0,b.jsx)(s.IntegrationSyncPanel,{statuses:f})}),(0,b.jsxs)("section",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[(0,b.jsxs)(l.Card,{className:"space-y-3 bg-gradient-to-br from-brand/10 via-white to-white",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs uppercase tracking-widest text-slate-500",children:[(0,b.jsxs)("span",{children:["Funds raised (","12m"===d?"12 months":"YTD",")"]}),(0,b.jsx)(h,{className:"h-5 w-5 text-brand"})]}),(0,b.jsx)("p",{className:"text-4xl font-semibold text-slate-900",children:(0,o.formatCurrency)(e.kpis.fundsYtd)}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:"Includes pledges received and committed."})]}),(0,b.jsxs)(l.Card,{className:"space-y-3 bg-gradient-to-br from-slate-50 via-white to-white",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs uppercase tracking-widest text-slate-500",children:[(0,b.jsx)("span",{children:"Active donors"}),(0,b.jsx)(k,{className:"h-5 w-5 text-brand-light"})]}),(0,b.jsx)("p",{className:"text-4xl font-semibold text-slate-900",children:(0,o.formatNumber)(e.kpis.activeDonors)}),(0,b.jsx)("p",{className:"text-xs text-slate-500",children:"Last gift within the past 12 months."})]}),(0,b.jsxs)(l.Card,{className:"space-y-3 bg-gradient-to-br from-white via-slate-50 to-white",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs uppercase tracking-widest text-slate-500",children:[(0,b.jsx)("span",{children:"Events + tickets"}),(0,b.jsx)(j,{className:"h-5 w-5 text-brand"})]}),(0,b.jsxs)("p",{className:"text-4xl font-semibold text-slate-900",children:[(0,o.formatNumber)(e.kpis.eventsThisYear)," ",(0,b.jsx)("span",{className:"text-base text-slate-500",children:"events"})]}),(0,b.jsxs)("p",{className:"text-sm font-semibold text-slate-800",children:[(0,o.formatNumber)(e.kpis.ticketsSold)," tickets sold"]})]}),(0,b.jsxs)(l.Card,{className:"space-y-3 bg-gradient-to-br from-white via-white to-slate-50",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs uppercase tracking-widest text-slate-500",children:[(0,b.jsx)("span",{children:"Website sessions (30d)"}),(0,b.jsx)(i,{className:"h-5 w-5 text-brand-light"})]}),(0,b.jsx)("p",{className:"text-4xl font-semibold text-slate-900",children:(0,o.formatNumber)(e.kpis.sessionsLast30Days)}),e.kpis.gaError?(0,b.jsx)("p",{className:"text-xs text-red-500",children:e.kpis.gaError}):(0,b.jsx)("p",{className:"text-xs text-slate-500",children:"Source: Google Analytics 4"})]})]}),(0,b.jsx)(l.Card,{title:"Performance trends",description:"Funds, ticketing, and sessions across the last 12 months",children:(0,b.jsx)(m.TimeSeriesChart,{data:e.charts.monthly,lines:[{dataKey:"funds",color:"#0f172a",name:"Funds raised",strokeWidth:3},{dataKey:"tickets",color:"#f97316",name:"Tickets sold",strokeWidth:3},{dataKey:"sessions",color:"#2563eb",name:"Sessions",strokeWidth:3}]})})]})}a.s(["default",()=>x],843)}];

//# sourceMappingURL=src_app_%28dashboard%29_341760ff._.js.map