module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},50645,a=>{a.n(a.i(27572))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},70844,a=>{a.n(a.i(92359))},35330,84347,14962,a=>{"use strict";var b=a.i(7997);let c=function(){for(var a,b,c=0,d="",e=arguments.length;c<e;c++)(a=arguments[c])&&(b=function a(b){var c,d,e="";if("string"==typeof b||"number"==typeof b)e+=b;else if("object"==typeof b)if(Array.isArray(b)){var f=b.length;for(c=0;c<f;c++)b[c]&&(d=a(b[c]))&&(e&&(e+=" "),e+=d)}else for(d in b)b[d]&&(e&&(e+=" "),e+=d);return e}(a))&&(d&&(d+=" "),d+=b);return d};function d({title:a,description:d,className:e,children:f,actions:g}){return(0,b.jsxs)("section",{className:c("card p-6 space-y-4",e),children:[(a||d||g)&&(0,b.jsxs)("header",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[a?(0,b.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:a}):null,d?(0,b.jsx)("p",{className:"text-sm text-slate-500",children:d}):null]}),g]}),(0,b.jsx)("div",{children:f})]})}function e({eyebrow:a,title:d,description:e,actions:f,children:g,className:h}){return(0,b.jsxs)("section",{className:c("relative overflow-hidden rounded-[32px] border border-white/60 bg-white/80 p-6 shadow-[0px_25px_60px_rgba(15,23,42,0.08)] backdrop-blur",h),children:[(0,b.jsxs)("div",{className:"pointer-events-none absolute inset-0",children:[(0,b.jsx)("div",{className:"absolute -top-16 -right-8 h-48 w-48 rounded-full bg-brand/15 blur-3xl"}),(0,b.jsx)("div",{className:"absolute bottom-[-60px] left-[-40px] h-44 w-44 rounded-full bg-accent/10 blur-3xl"})]}),(0,b.jsxs)("div",{className:"relative z-10 flex flex-wrap items-start gap-6",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[a?(0,b.jsx)("span",{className:"inline-flex items-center rounded-full border border-slate-100/70 bg-slate-50/80 px-3 py-1 text-xs font-semibold uppercase tracking-[0.16em] text-slate-500",children:a}):null,(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-semibold leading-tight text-slate-900",children:d}),e?(0,b.jsx)("p",{className:"mt-2 max-w-3xl text-sm text-slate-600",children:e}):null]})]}),f?(0,b.jsx)("div",{className:"ml-auto flex flex-col items-stretch gap-3",children:f}):null]}),g?(0,b.jsx)("div",{className:"relative z-10 mt-6",children:g}):null]})}function f({items:a,columns:d=3}){return(0,b.jsx)("div",{className:c("grid gap-4 text-sm text-slate-600",2===d?"sm:grid-cols-2":4===d?"sm:grid-cols-2 lg:grid-cols-4":"sm:grid-cols-3"),children:a.map(a=>(0,b.jsxs)("div",{className:"rounded-2xl border border-slate-100/70 bg-white/90 px-4 py-3 shadow-inner shadow-slate-200/70",children:[(0,b.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:a.label}),(0,b.jsx)("p",{className:"mt-1 text-base font-semibold text-slate-900",children:a.value}),a.helper?(0,b.jsx)("p",{className:"mt-0.5 text-xs text-slate-500",children:a.helper}):null]},`${a.label}-${a.value}`))})}a.s(["default",0,c],84347),a.s(["Card",()=>d],35330),a.s(["PageHeader",()=>e,"PageHeaderMeta",()=>f],14962)},43116,a=>{"use strict";function b(a,c="USD",d=0){return new Intl.NumberFormat("en-US",{style:"currency",currency:c,maximumFractionDigits:d}).format(a)}function c(a,b=0){return new Intl.NumberFormat("en-US",{maximumFractionDigits:b}).format(a)}function d(a,b=1){return new Intl.NumberFormat("en-US",{style:"percent",maximumFractionDigits:b}).format(a)}function e(a,b={month:"short",day:"numeric",year:"numeric"}){let c="string"==typeof a?new Date(a):a;return new Intl.DateTimeFormat("en-US",b).format(c)}a.s(["formatCurrency",()=>b,"formatDate",()=>e,"formatNumber",()=>c,"formatPercent",()=>d])},57111,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},790,(a,b,c)=>{let{createClientModuleProxy:d}=a.r(11857);a.n(d("[project]/node_modules/next/dist/client/app-dir/link.js <module evaluation>"))},84707,(a,b,c)=>{let{createClientModuleProxy:d}=a.r(11857);a.n(d("[project]/node_modules/next/dist/client/app-dir/link.js"))},27649,a=>{"use strict";a.i(790);var b=a.i(84707);a.n(b)},95936,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={default:function(){return i},useLinkStatus:function(){return h.useLinkStatus}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(57111),g=a.r(7997),h=f._(a.r(27649));function i(a){let b=a.legacyBehavior,c="string"==typeof a.children||"number"==typeof a.children||"string"==typeof a.children?.type,d=a.children?.type?.$$typeof===Symbol.for("react.client.reference");return!b||c||d||(a.children?.type?.$$typeof===Symbol.for("react.lazy")?console.error("Using a Lazy Component as a direct child of `<Link legacyBehavior>` from a Server Component is not supported. If you need legacyBehavior, wrap your Lazy Component in a Client Component that renders the Link's `<a>` tag."):console.error("Using a Server Component as a direct child of `<Link legacyBehavior>` is not supported. If you need legacyBehavior, wrap your Server Component in a Client Component that renders the Link's `<a>` tag.")),(0,g.jsx)(h.default,{...a})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},19637,a=>{"use strict";var b=a.i(7997),c=a.i(84347);let d={default:"bg-slate-100 text-slate-800",success:"bg-green-100 text-green-800",warning:"bg-amber-100 text-amber-800",danger:"bg-red-100 text-red-700"};function e({children:a,variant:e="default",className:f}){return(0,b.jsx)("span",{className:(0,c.default)("inline-flex items-center rounded-full px-3 py-0.5 text-xs font-medium",d[e],f),children:a})}a.s(["Badge",()=>e])},51750,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call Button() from the server but Button is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/button.tsx <module evaluation>","Button");a.s(["Button",0,b])},82956,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call Button() from the server but Button is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/ui/button.tsx","Button");a.s(["Button",0,b])},38904,a=>{"use strict";a.i(51750);var b=a.i(82956);a.n(b)},19291,a=>{"use strict";var b=a.i(29173),c=a.i(66518);async function d(){try{return await c.prisma.emailCampaign.findMany({include:{template:!0,audienceSegment:!0,_count:{select:{logs:!0}}},orderBy:{createdAt:"desc"}})}catch(a){return console.warn("Unable to load email campaigns, returning empty list",a instanceof Error?a.message:a),[]}}async function e(){try{let[a,b,d,e]=await Promise.all([c.prisma.emailTemplate.findMany({orderBy:{name:"asc"}}),c.prisma.event.findMany({orderBy:{startDate:"desc"},select:{id:!0,name:!0,startDate:!0}}),c.prisma.pledge.findMany({where:{campaign:{not:null}},distinct:["campaign"],select:{campaign:!0}}),c.prisma.donor.findFirst({orderBy:{totalGiven:"desc"},select:{name:!0,email:!0}})]);return{templates:a,events:b.map(a=>({...a,startDate:a.startDate.toISOString()})),pledgeCampaigns:d.map(a=>a.campaign).filter(Boolean),sampleDonor:e}}catch(a){return console.warn("Unable to load email form data",a instanceof Error?a.message:a),{templates:[],events:[],pledgeCampaigns:[],sampleDonor:null}}}function f(a){switch(a){case b.CampaignStatus.DRAFT:return"Draft";case b.CampaignStatus.SCHEDULED:return"Scheduled";case b.CampaignStatus.SENT:return"Sent";case b.CampaignStatus.FAILED:return"Failed";default:return a}}a.s(["campaignStatusLabel",()=>f,"getEmailCampaigns",()=>d,"getEmailFormData",()=>e])},28881,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call DraftGenerator() from the server but DraftGenerator is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(dashboard)/emails/_components/draft-generator.tsx <module evaluation>","DraftGenerator");a.s(["DraftGenerator",0,b])},54515,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call DraftGenerator() from the server but DraftGenerator is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(dashboard)/emails/_components/draft-generator.tsx","DraftGenerator");a.s(["DraftGenerator",0,b])},48698,a=>{"use strict";a.i(28881);var b=a.i(54515);a.n(b)},72566,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call DeleteCampaignButton() from the server but DeleteCampaignButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(dashboard)/emails/_components/delete-campaign-button.tsx <module evaluation>","DeleteCampaignButton");a.s(["DeleteCampaignButton",0,b])},48148,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call DeleteCampaignButton() from the server but DeleteCampaignButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/app/(dashboard)/emails/_components/delete-campaign-button.tsx","DeleteCampaignButton");a.s(["DeleteCampaignButton",0,b])},46411,a=>{"use strict";a.i(72566);var b=a.i(48148);a.n(b)},61114,a=>{"use strict";var b=a.i(7997),c=a.i(95936),d=a.i(38904),e=a.i(35330),f=a.i(19637),g=a.i(48698),h=a.i(46411),i=a.i(76340),j=a.i(19291),k=a.i(43116),l=a.i(14962);async function m(){let a=await (0,j.getEmailCampaigns)(),m=a.filter(a=>"SCHEDULED"===a.status).length,n=a.filter(a=>"SENT"===a.status).length,o=a.filter(a=>"DRAFT"===a.status).length;return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsx)(l.PageHeader,{eyebrow:"Outreach",title:"Email campaigns",description:"Use donor insights to draft targeted outreach. Copy the AI draft into your preferred email platform.",actions:(0,b.jsx)(d.Button,{asChild:!0,children:(0,b.jsx)(c.default,{href:"/emails/create",children:"Create campaign"})}),children:(0,b.jsx)(l.PageHeaderMeta,{items:[{label:"Scheduled",value:String(m)},{label:"Drafts",value:String(o)},{label:"Delivered",value:String(n)}],columns:3})}),(0,b.jsxs)("div",{className:"grid gap-4",children:[a.map(a=>(0,b.jsx)(e.Card,{children:(0,b.jsxs)("div",{className:"flex flex-col gap-6 lg:flex-row lg:items-start",children:[(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:a.name}),(0,b.jsx)(f.Badge,{variant:"FAILED"===a.status?"danger":"SENT"===a.status?"success":"default",children:(0,j.campaignStatusLabel)(a.status)})]}),(0,b.jsxs)("p",{className:"text-sm text-slate-500",children:["Template: ",a.template.name," · Audience: ",a.audienceSegment.name]}),(0,b.jsxs)("p",{className:"text-xs text-slate-500",children:["Created ",(0,k.formatDate)(a.createdAt)," ·"," ",a.sentAt?`Sent ${(0,k.formatDate)(a.sentAt)}`:"Not sent yet"]})]}),(0,b.jsxs)("div",{className:"flex w-full flex-col gap-3 lg:max-w-md",children:[(0,b.jsx)(g.DraftGenerator,{campaignId:a.id,action:i.generateCampaignDraftAction}),(0,b.jsx)(h.DeleteCampaignButton,{campaignId:a.id,campaignName:a.name})]})]})},a.id)),0===a.length?(0,b.jsx)(e.Card,{children:(0,b.jsx)("p",{className:"text-sm text-slate-500",children:"No campaigns yet. Create one to thank donors or promote events."})}):null]})]})}a.s(["default",()=>m])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__cb2f63d2._.js.map