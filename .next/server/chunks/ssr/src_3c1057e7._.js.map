{"version":3,"sources":["../../../../src/components/ui/input.tsx","../../../../src/components/ui/select.tsx","../../../../src/components/ui/textarea.tsx","../../../../src/app/%28dashboard%29/emails/create/wizard.tsx","../../../../src/lib/format.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { forwardRef } from \"react\";\r\nimport type { InputHTMLAttributes } from \"react\";\r\nimport clsx from \"clsx\";\r\n\r\ninterface InputProps extends InputHTMLAttributes<HTMLInputElement> {\r\n  error?: string;\r\n}\r\n\r\nexport const Input = forwardRef<HTMLInputElement, InputProps>(function Input({ className, error, ...props }, ref) {\r\n  return (\r\n    <div className=\"space-y-1\">\r\n      <input\r\n        ref={ref}\r\n        className={clsx(\r\n          \"w-full rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-900 outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/30\",\r\n          className\r\n        )}\r\n        {...props}\r\n      />\r\n      {error ? <p className=\"text-xs text-red-500\">{error}</p> : null}\r\n    </div>\r\n  );\r\n});\r\n\r\n","\"use client\";\r\n\r\nimport { forwardRef } from \"react\";\r\nimport type { SelectHTMLAttributes } from \"react\";\r\nimport clsx from \"clsx\";\r\n\r\ninterface SelectProps extends SelectHTMLAttributes<HTMLSelectElement> {\r\n  error?: string;\r\n}\r\n\r\nexport const Select = forwardRef<HTMLSelectElement, SelectProps>(function Select({ className, children, error, ...props }, ref) {\r\n  return (\r\n    <div className=\"space-y-1\">\r\n      <select\r\n        ref={ref}\r\n        className={clsx(\r\n          \"w-full rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-900 outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/30\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        {children}\r\n      </select>\r\n      {error ? <p className=\"text-xs text-red-500\">{error}</p> : null}\r\n    </div>\r\n  );\r\n});\r\n\r\n","\"use client\";\r\n\r\nimport { forwardRef } from \"react\";\r\nimport type { TextareaHTMLAttributes } from \"react\";\r\nimport clsx from \"clsx\";\r\n\r\ninterface TextAreaProps extends TextareaHTMLAttributes<HTMLTextAreaElement> {\r\n  error?: string;\r\n}\r\n\r\nexport const TextArea = forwardRef<HTMLTextAreaElement, TextAreaProps>(function TextArea(\r\n  { className, error, ...props },\r\n  ref\r\n) {\r\n  return (\r\n    <div className=\"space-y-1\">\r\n      <textarea\r\n        ref={ref}\r\n        className={clsx(\r\n          \"w-full rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm text-slate-900 outline-none transition focus:border-brand focus:ring-2 focus:ring-brand/30\",\r\n          className\r\n        )}\r\n        {...props}\r\n      />\r\n      {error ? <p className=\"text-xs text-red-500\">{error}</p> : null}\r\n    </div>\r\n  );\r\n});\r\n\r\n","\"use client\";\r\n\r\nimport type { EmailTemplate } from '@prisma/client';\r\nimport { useMemo, useState, useTransition } from 'react';\r\n\r\nimport type { CreateCampaignInput } from '@/app/(dashboard)/emails/actions';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Select } from '@/components/ui/select';\r\nimport { TextArea } from '@/components/ui/textarea';\r\nimport { formatDate } from '@/lib/format';\r\n\r\ninterface WizardData {\r\n  templates: EmailTemplate[];\r\n  events: Array<{ id: string; name: string; startDate: string }>;\r\n  pledgeCampaigns: string[];\r\n  sampleDonor: { name?: string | null; email?: string | null } | null;\r\n}\r\n\r\ninterface CampaignWizardProps {\r\n  data: WizardData;\r\n  action: (input: CreateCampaignInput) => Promise<{ success: boolean; campaignId: string }>;\r\n}\r\n\r\ntype Step = 0 | 1 | 2 | 3;\r\n\r\nexport function CampaignWizard({ data, action }: CampaignWizardProps) {\r\n  const [step, setStep] = useState<Step>(0);\r\n  const [pending, startTransition] = useTransition();\r\n  const [status, setStatus] = useState<{ success?: string; error?: string }>({});\r\n\r\n  const [form, setForm] = useState({\r\n    name: '',\r\n    audience: {\r\n      donatedWithinDays: 90,\r\n      totalGivenGreaterThan: 1000,\r\n      attendedEventIds: [] as string[],\r\n      pledgeCampaigns: [] as string[]\r\n    },\r\n    templateMode: data.templates.length ? 'existing' : 'new',\r\n    templateId: data.templates[0]?.id ?? '',\r\n    newTemplate: {\r\n      name: '',\r\n      subject: '',\r\n      html: '<p>Dear {{ name }},<br/>Thank you for supporting BHIC.</p>',\r\n      text: 'Dear {{ name }},\\n\\nThank you for supporting BHIC.'\r\n    }\r\n  });\r\n\r\n  const previewTemplate = useMemo(() => {\r\n    if (form.templateMode === 'existing') {\r\n      return data.templates.find((template) => template.id === form.templateId);\r\n    }\r\n    return form.newTemplate;\r\n  }, [data.templates, form.templateId, form.templateMode, form.newTemplate]);\r\n\r\n  function nextStep() {\r\n    setStep((current) => {\r\n      const next = current + 1;\r\n      return (next > 3 ? 3 : (next as Step));\r\n    });\r\n  }\r\n\r\n  function prevStep() {\r\n    setStep((current) => {\r\n      const prev = current - 1;\r\n      return (prev < 0 ? 0 : (prev as Step));\r\n    });\r\n  }\r\n\r\n  function renderPreview(content?: string | null) {\r\n    const sampleName = data.sampleDonor?.name ?? 'BHIC Supporter';\r\n    return content?.replace(/{{\\s*name\\s*}}/gi, sampleName) ?? '';\r\n  }\r\n\r\n  function updateAudience(field: keyof typeof form.audience, value: number | string[]) {\r\n    setForm((current) => ({\r\n      ...current,\r\n      audience: {\r\n        ...current.audience,\r\n        [field]: value\r\n      }\r\n    }));\r\n  }\r\n\r\n  function updateNewTemplate(field: keyof typeof form.newTemplate, value: string) {\r\n    setForm((current) => ({\r\n      ...current,\r\n      newTemplate: {\r\n        ...current.newTemplate,\r\n        [field]: value\r\n      }\r\n    }));\r\n  }\r\n\r\n  function submit() {\r\n    setStatus({});\r\n    startTransition(async () => {\r\n      try {\r\n        const payload: CreateCampaignInput = {\r\n          name: form.name,\r\n          audience: {\r\n            donatedWithinDays: form.audience.donatedWithinDays,\r\n            totalGivenGreaterThan: form.audience.totalGivenGreaterThan,\r\n            attendedEventIds: form.audience.attendedEventIds,\r\n            pledgeCampaigns: form.audience.pledgeCampaigns\r\n          },\r\n          template:\r\n            form.templateMode === 'existing'\r\n              ? {\r\n                  mode: 'existing',\r\n                  templateId: form.templateId\r\n                }\r\n              : {\r\n                  mode: 'new',\r\n                  name: form.newTemplate.name,\r\n                  subject: form.newTemplate.subject,\r\n                  html: form.newTemplate.html,\r\n                  text: form.newTemplate.text\r\n                }\r\n        };\r\n\r\n        const result = await action(payload);\r\n        if (result.success) {\r\n          setStatus({ success: 'Campaign saved successfully.' });\r\n        }\r\n      } catch (error) {\r\n        setStatus({ error: error instanceof Error ? error.message : 'Unable to create campaign.' });\r\n      }\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <ol className=\"flex flex-wrap items-center gap-4 text-sm font-medium text-slate-500\">\r\n        {['Campaign', 'Audience', 'Template', 'Review'].map((label, index) => (\r\n          <li key={label} className={index === step ? 'text-brand' : undefined}>\r\n            {index + 1}. {label}\r\n          </li>\r\n        ))}\r\n      </ol>\r\n\r\n      {step === 0 ? (\r\n        <section className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"text-sm font-semibold text-slate-700\">Campaign name</label>\r\n            <Input value={form.name} onChange={(event) => setForm((current) => ({ ...current, name: event.target.value }))} />\r\n          </div>\r\n          <p className=\"text-xs text-slate-500\">Use a descriptive name that is easy for staff to identify later.</p>\r\n        </section>\r\n      ) : null}\r\n\r\n      {step === 1 ? (\r\n        <section className=\"grid gap-4 md:grid-cols-2\">\r\n          <div>\r\n            <label className=\"text-sm font-semibold text-slate-700\">Donated within (days)</label>\r\n            <Input\r\n              type=\"number\"\r\n              min={0}\r\n              value={form.audience.donatedWithinDays}\r\n              onChange={(event) => updateAudience('donatedWithinDays', Number(event.target.value))}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-semibold text-slate-700\">Minimum lifetime value ($)</label>\r\n            <Input\r\n              type=\"number\"\r\n              min={0}\r\n              value={form.audience.totalGivenGreaterThan}\r\n              onChange={(event) => updateAudience('totalGivenGreaterThan', Number(event.target.value))}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-semibold text-slate-700\">Attended events</label>\r\n            <select\r\n              multiple\r\n              className=\"h-32 w-full rounded-xl border border-slate-200 px-3 py-2 text-sm\"\r\n              value={form.audience.attendedEventIds}\r\n              onChange={(event) =>\r\n                updateAudience(\r\n                  'attendedEventIds',\r\n                  Array.from(event.target.selectedOptions, (option) => option.value)\r\n                )\r\n              }\r\n            >\r\n              {data.events.map((event) => (\r\n                <option key={event.id} value={event.id}>\r\n                  {event.name} Â· {formatDate(event.startDate)}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label className=\"text-sm font-semibold text-slate-700\">Pledge campaigns</label>\r\n            <select\r\n              multiple\r\n              className=\"h-32 w-full rounded-xl border border-slate-200 px-3 py-2 text-sm\"\r\n              value={form.audience.pledgeCampaigns}\r\n              onChange={(event) =>\r\n                updateAudience(\r\n                  'pledgeCampaigns',\r\n                  Array.from(event.target.selectedOptions, (option) => option.value)\r\n                )\r\n              }\r\n            >\r\n              {data.pledgeCampaigns.map((campaign) => (\r\n                <option key={campaign} value={campaign}>\r\n                  {campaign}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </section>\r\n      ) : null}\r\n\r\n      {step === 2 ? (\r\n        <section className=\"space-y-6\">\r\n          <div>\r\n            <p className=\"text-sm font-semibold text-slate-700\">Template source</p>\r\n            <div className=\"mt-2 flex flex-wrap gap-4\">\r\n              <label className=\"flex items-center gap-2 text-sm\">\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"templateMode\"\r\n                  value=\"existing\"\r\n                  checked={form.templateMode === 'existing'}\r\n                  onChange={() => setForm((current) => ({ ...current, templateMode: 'existing' }))}\r\n                  disabled={!data.templates.length}\r\n                />\r\n                Use existing template\r\n              </label>\r\n              <label className=\"flex items-center gap-2 text-sm\">\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"templateMode\"\r\n                  value=\"new\"\r\n                  checked={form.templateMode === 'new'}\r\n                  onChange={() => setForm((current) => ({ ...current, templateMode: 'new' }))}\r\n                />\r\n                Create new template\r\n              </label>\r\n            </div>\r\n          </div>\r\n          {form.templateMode === 'existing' ? (\r\n            <div>\r\n              <label className=\"text-sm font-semibold text-slate-700\">Select template</label>\r\n              <Select value={form.templateId} onChange={(event) => setForm((current) => ({ ...current, templateId: event.target.value }))}>\r\n                {data.templates.map((template) => (\r\n                  <option key={template.id} value={template.id}>\r\n                    {template.name}\r\n                  </option>\r\n                ))}\r\n              </Select>\r\n            </div>\r\n          ) : (\r\n            <div className=\"grid gap-4 md:grid-cols-2\">\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-sm font-semibold text-slate-700\">Template name</label>\r\n                <Input value={form.newTemplate.name} onChange={(event) => updateNewTemplate('name', event.target.value)} />\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-sm font-semibold text-slate-700\">Subject</label>\r\n                <Input value={form.newTemplate.subject} onChange={(event) => updateNewTemplate('subject', event.target.value)} />\r\n              </div>\r\n              <div className=\"md:col-span-2 space-y-2\">\r\n                <label className=\"text-sm font-semibold text-slate-700\">HTML body</label>\r\n                <TextArea rows={4} value={form.newTemplate.html} onChange={(event) => updateNewTemplate('html', event.target.value)} />\r\n              </div>\r\n              <div className=\"md:col-span-2 space-y-2\">\r\n                <label className=\"text-sm font-semibold text-slate-700\">Text body</label>\r\n                <TextArea rows={4} value={form.newTemplate.text} onChange={(event) => updateNewTemplate('text', event.target.value)} />\r\n              </div>\r\n            </div>\r\n          )}\r\n        </section>\r\n      ) : null}\r\n\r\n      {step === 3 ? (\r\n        <section className=\"space-y-4\">\r\n          <div className=\"rounded-2xl border border-slate-200 bg-slate-50 p-4\">\r\n            <p className=\"text-sm font-semibold text-slate-700\">Preview</p>\r\n            <p className=\"text-xs text-slate-500\">\r\n              Gemini will use this template plus donor context to suggest a final draft after you save. Below is the base content rendered for{' '}\r\n              {data.sampleDonor?.name ?? 'a sample donor'}.\r\n            </p>\r\n            <div className=\"mt-3 rounded-2xl bg-white p-4 shadow-inner\">\r\n              <div className=\"font-semibold text-slate-900\">{previewTemplate?.subject ?? 'Subject TBD'}</div>\r\n              <div className=\"mt-2 text-sm text-slate-700\" dangerouslySetInnerHTML={{ __html: renderPreview(previewTemplate?.html) }} />\r\n            </div>\r\n          </div>\r\n        </section>\r\n      ) : null}\r\n\r\n      {status.error ? <p className=\"text-sm text-red-500\">{status.error}</p> : null}\r\n      {status.success ? <p className=\"text-sm text-green-600\">{status.success}</p> : null}\r\n\r\n      <div className=\"flex items-center justify-between\">\r\n        <Button type=\"button\" variant=\"ghost\" onClick={prevStep} disabled={step === 0}>\r\n          Back\r\n        </Button>\r\n        {step < 3 ? (\r\n          <Button type=\"button\" onClick={nextStep}>\r\n            Next\r\n          </Button>\r\n        ) : (\r\n          <Button type=\"button\" onClick={submit} disabled={pending}>\r\n            {pending ? 'Saving...' : 'Save campaign'}\r\n          </Button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n","export function formatCurrency(value: number, currency = 'USD', maximumFractionDigits = 0) {\r\n  return new Intl.NumberFormat('en-US', {\r\n    style: 'currency',\r\n    currency,\r\n    maximumFractionDigits\r\n  }).format(value);\r\n}\r\n\r\nexport function formatNumber(value: number, maximumFractionDigits = 0) {\r\n  return new Intl.NumberFormat('en-US', {\r\n    maximumFractionDigits\r\n  }).format(value);\r\n}\r\n\r\nexport function formatPercent(value: number, maximumFractionDigits = 1) {\r\n  return new Intl.NumberFormat('en-US', {\r\n    style: 'percent',\r\n    maximumFractionDigits\r\n  }).format(value);\r\n}\r\n\r\nexport function formatDate(date: Date | string, options: Intl.DateTimeFormatOptions = { month: 'short', day: 'numeric', year: 'numeric' }) {\r\n  const dt = typeof date === 'string' ? new Date(date) : date;\r\n  return new Intl.DateTimeFormat('en-US', options).format(dt);\r\n}\r\n\r\n"],"names":[],"mappings":"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"}