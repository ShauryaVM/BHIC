{"version":3,"sources":["../../../../node_modules/next/src/build/webpack/loaders/next-flight-loader/action-client-wrapper.ts","../../../../src/app/%28dashboard%29/emails/_components/draft-generator.tsx","../../../../src/app/%28dashboard%29/emails/_components/delete-campaign-button.tsx","../../../../src/app/%28dashboard%29/emails/data%3Ade5c17%20%3Ctext/javascript%3E"],"sourcesContent":["// This file must be bundled in the app's client layer, it shouldn't be directly\n// imported by the server.\n\nexport { callServer } from 'next/dist/client/app-call-server'\nexport { findSourceMapURL } from 'next/dist/client/app-find-source-map-url'\n\n// A noop wrapper to let the Flight client create the server reference.\n// See also: https://github.com/facebook/react/pull/26632\n// eslint-disable-next-line import/no-extraneous-dependencies\nexport { createServerReference } from 'react-server-dom-webpack/client'\n","\"use client\";\r\n\r\nimport type { ReactNode } from 'react';\r\nimport { useMemo, useState, useTransition } from 'react';\r\n\r\nimport type { EmailDraftSuggestion } from '@/lib/email';\r\nimport { Button } from '@/components/ui/button';\r\n\r\ninterface DraftGeneratorProps {\r\n  campaignId: string;\r\n  action: (campaignId: string) => Promise<{ success: boolean; suggestion: EmailDraftSuggestion }>;\r\n}\r\n\r\nexport function DraftGenerator({ campaignId, action }: DraftGeneratorProps) {\r\n  const [pending, startTransition] = useTransition();\r\n  const [draft, setDraft] = useState<EmailDraftSuggestion | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  function handleGenerate() {\r\n    setError(null);\r\n    startTransition(async () => {\r\n      try {\r\n        const result = await action(campaignId);\r\n        if (result.success) {\r\n          setDraft(result.suggestion);\r\n        }\r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : 'Unable to generate suggestion.');\r\n      }\r\n    });\r\n  }\r\n\r\n  const previewHtml = useMemo(() => ({ __html: draft?.html ?? '' }), [draft]);\r\n\r\n  return (\r\n    <div className=\"w-full space-y-3 rounded-2xl border border-slate-200 bg-slate-50 p-4\">\r\n      <div className=\"flex items-center justify-between gap-3\">\r\n        <div>\r\n          <p className=\"text-xs font-semibold uppercase tracking-wider text-slate-500\">AI suggestion</p>\r\n          <p className=\"text-[11px] text-slate-500\">Review before sending. Nothing is emailed automatically.</p>\r\n        </div>\r\n        <Button type=\"button\" variant=\"secondary\" size=\"sm\" disabled={pending} onClick={handleGenerate}>\r\n          {pending ? 'Generating...' : draft ? 'Refresh draft' : 'Generate draft'}\r\n        </Button>\r\n      </div>\r\n      {error ? <p className=\"text-sm text-red-500\">{error}</p> : null}\r\n      {draft ? (\r\n        <div className=\"space-y-4 rounded-2xl border border-white/60 bg-white p-4 shadow-inner\">\r\n          <section>\r\n            <HeaderRow label=\"Suggested subject\">\r\n              <CopyButton value={draft.subject} />\r\n            </HeaderRow>\r\n            <p className=\"text-sm font-semibold text-slate-900\">{draft.subject}</p>\r\n          </section>\r\n          <section>\r\n            <HeaderRow label=\"HTML preview\">\r\n              <CopyButton value={draft.html} />\r\n            </HeaderRow>\r\n            <div className=\"prose prose-sm max-w-none text-slate-700\" dangerouslySetInnerHTML={previewHtml} />\r\n          </section>\r\n          <section>\r\n            <HeaderRow label=\"Plain text\">\r\n              <CopyButton value={draft.text} />\r\n            </HeaderRow>\r\n            <pre className=\"max-h-48 overflow-auto whitespace-pre-wrap rounded-xl bg-slate-50 p-3 text-xs text-slate-700\">\r\n              {draft.text}\r\n            </pre>\r\n          </section>\r\n          {draft.talkingPoints?.length ? (\r\n            <section>\r\n              <p className=\"text-xs font-semibold uppercase tracking-wider text-slate-500\">Talking points</p>\r\n              <ul className=\"list-disc space-y-1 pl-4 text-sm text-slate-700\">\r\n                {draft.talkingPoints.map((point) => (\r\n                  <li key={point}>{point}</li>\r\n                ))}\r\n              </ul>\r\n            </section>\r\n          ) : null}\r\n        </div>\r\n      ) : (\r\n        <p className=\"text-sm text-slate-500\">Generate a tailored subject and body using Gemini, then copy into your email platform.</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction HeaderRow({ label, children }: { label: string; children?: ReactNode }) {\r\n  return (\r\n    <div className=\"mb-1 flex items-center justify-between text-xs text-slate-500\">\r\n      <span className=\"font-semibold uppercase tracking-wider\">{label}</span>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction CopyButton({ value }: { value: string }) {\r\n  const [copied, setCopied] = useState(false);\r\n\r\n  async function copy() {\r\n    try {\r\n      await navigator.clipboard.writeText(value);\r\n      setCopied(true);\r\n      setTimeout(() => setCopied(false), 2000);\r\n    } catch {\r\n      setCopied(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      onClick={copy}\r\n      className=\"rounded-full border border-slate-200 px-3 py-1 text-[11px] font-semibold uppercase tracking-wide text-slate-600 transition hover:border-slate-300\"\r\n    >\r\n      {copied ? 'Copied' : 'Copy'}\r\n    </button>\r\n  );\r\n}\r\n\r\n","\"use client\";\r\n\r\nimport { useState, useTransition } from \"react\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { deleteCampaignAction } from \"@/app/(dashboard)/emails/actions\";\r\n\r\ninterface DeleteCampaignButtonProps {\r\n  campaignId: string;\r\n  campaignName: string;\r\n}\r\n\r\nexport function DeleteCampaignButton({ campaignId, campaignName }: DeleteCampaignButtonProps) {\r\n  const [pending, startTransition] = useTransition();\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  function handleDelete() {\r\n    const confirmed = window.confirm(`Delete \"${campaignName}\"? This cannot be undone.`);\r\n    if (!confirmed) {\r\n      return;\r\n    }\r\n    setError(null);\r\n    startTransition(async () => {\r\n      try {\r\n        const result = await deleteCampaignAction({ campaignId });\r\n        if (!result.success) {\r\n          throw new Error(\"Unable to delete campaign.\");\r\n        }\r\n      } catch (err) {\r\n        console.error(err);\r\n        setError(err instanceof Error ? err.message : \"Failed to delete campaign.\");\r\n      }\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <Button type=\"button\" variant=\"danger\" size=\"sm\" disabled={pending} onClick={handleDelete}>\r\n        {pending ? \"Deleting...\" : \"Delete campaign\"}\r\n      </Button>\r\n      {error ? <p className=\"text-xs text-red-500\">{error}</p> : null}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n","/* __next_internal_action_entry_do_not_use__ [{\"4093ad12e2db7fa3323ca44394c7b2ed9ef961aac2\":\"deleteCampaignAction\"},\"src/app/(dashboard)/emails/actions.ts\",\"\"] */\"use turbopack no side effects\";import{createServerReference,callServer,findSourceMapURL}from\"private-next-rsc-action-client-wrapper\";export var deleteCampaignAction=/*#__PURE__*/createServerReference(\"4093ad12e2db7fa3323ca44394c7b2ed9ef961aac2\",callServer,void 0,findSourceMapURL,\"deleteCampaignAction\");"],"names":["callServer","createServerReference","findSourceMapURL"],"mappings":"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","ignoreList":[0]}