{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/inter_5901b7c6.module.css [app-rsc] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"className\": \"inter_5901b7c6-module__ec5Qua__className\",\n  \"variable\": \"inter_5901b7c6-module__ec5Qua__variable\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA","ignoreList":[0]}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/inter_5901b7c6.js"],"sourcesContent":["import cssModule from \"@vercel/turbopack-next/internal/font/google/cssmodule.module.css?{%22path%22:%22layout.tsx%22,%22import%22:%22Inter%22,%22arguments%22:[{%22subsets%22:[%22latin%22],%22variable%22:%22--font-inter%22}],%22variableName%22:%22inter%22}\";\nconst fontData = {\n    className: cssModule.className,\n    style: {\n        fontFamily: \"'Inter', 'Inter Fallback'\",\n        fontStyle: \"normal\",\n\n    },\n};\n\nif (cssModule.variable != null) {\n    fontData.variable = cssModule.variable;\n}\n\nexport default fontData;\n"],"names":[],"mappings":";;;;AAAA;;AACA,MAAM,WAAW;IACb,WAAW,gKAAS,CAAC,SAAS;IAC9B,OAAO;QACH,YAAY;QACZ,WAAW;IAEf;AACJ;AAEA,IAAI,gKAAS,CAAC,QAAQ,IAAI,MAAM;IAC5B,SAAS,QAAQ,GAAG,gKAAS,CAAC,QAAQ;AAC1C;uCAEe","ignoreList":[0]}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Shaurya/Documents/GitHub/BHIC/src/components/providers/session-provider.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AuthSessionProvider = registerClientReference(\n    function() { throw new Error(\"Attempted to call AuthSessionProvider() from the server but AuthSessionProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/providers/session-provider.tsx <module evaluation>\",\n    \"AuthSessionProvider\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,sBAAsB,IAAA,wQAAuB,EACtD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,+EACA","ignoreList":[0]}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Shaurya/Documents/GitHub/BHIC/src/components/providers/session-provider.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AuthSessionProvider = registerClientReference(\n    function() { throw new Error(\"Attempted to call AuthSessionProvider() from the server but AuthSessionProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/providers/session-provider.tsx\",\n    \"AuthSessionProvider\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,sBAAsB,IAAA,wQAAuB,EACtD;IAAa,MAAM,IAAI,MAAM;AAAsP,GACnR,2DACA","ignoreList":[0]}},
    {"offset": {"line": 114, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Shaurya/Documents/GitHub/BHIC/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\r\n\r\ndeclare global {\r\n  // eslint-disable-next-line no-var, vars-on-top\r\n  var prisma: PrismaClient | undefined;\r\n}\r\n\r\nexport const prisma = global.prisma ?? new PrismaClient({\r\n  log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error']\r\n});\r\n\r\nif (process.env.NODE_ENV !== 'production') {\r\n  global.prisma = prisma;\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;AAOO,MAAM,SAAS,OAAO,MAAM,IAAI,IAAI,6IAAY,CAAC;IACtD,KAAK,uCAAyC;QAAC;QAAS;QAAS;KAAO,GAAG;AAC7E;AAEA,wCAA2C;IACzC,OAAO,MAAM,GAAG;AAClB"}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Shaurya/Documents/GitHub/BHIC/src/lib/env.ts"],"sourcesContent":["import { z } from 'zod';\r\n\r\nconst envSchema = z.object({\r\n  DATABASE_URL: z.string().min(1),\r\n  NEXTAUTH_URL: z.string().url(),\r\n  NEXTAUTH_SECRET: z.string().min(32),\r\n  GOOGLE_CLIENT_ID: z.string().min(1),\r\n  GOOGLE_CLIENT_SECRET: z.string().min(1),\r\n  ADMIN_EMAILS: z.string().default(''),\r\n  ALLOWED_EMAIL_DOMAIN: z.string().default('bhic.org'),\r\n  ETAPESTRY_BASE_URL: z.string().url(),\r\n  ETAPESTRY_API_TOKEN: z.string().min(1),\r\n  EVENTBRITE_API_TOKEN: z.string().min(1),\r\n  GA4_PROPERTY_ID: z.string().min(1),\r\n  GA4_SERVICE_ACCOUNT_JSON: z.string().min(2),\r\n  GEMINI_API_KEY: z.string().min(1),\r\n  GEMINI_MODEL: z.string().default('models/gemini-1.5-flash')\r\n});\r\n\r\nconst parsed = envSchema.safeParse({\r\n  DATABASE_URL: process.env.DATABASE_URL,\r\n  NEXTAUTH_URL: process.env.NEXTAUTH_URL,\r\n  NEXTAUTH_SECRET: process.env.NEXTAUTH_SECRET,\r\n  GOOGLE_CLIENT_ID: process.env.GOOGLE_CLIENT_ID,\r\n  GOOGLE_CLIENT_SECRET: process.env.GOOGLE_CLIENT_SECRET,\r\n  ADMIN_EMAILS: process.env.ADMIN_EMAILS ?? '',\r\n  ALLOWED_EMAIL_DOMAIN: process.env.ALLOWED_EMAIL_DOMAIN ?? 'bhic.org',\r\n  ETAPESTRY_BASE_URL: process.env.ETAPESTRY_BASE_URL,\r\n  ETAPESTRY_API_TOKEN: process.env.ETAPESTRY_API_TOKEN,\r\n  EVENTBRITE_API_TOKEN: process.env.EVENTBRITE_API_TOKEN,\r\n  GA4_PROPERTY_ID: process.env.GA4_PROPERTY_ID,\r\n  GA4_SERVICE_ACCOUNT_JSON: process.env.GA4_SERVICE_ACCOUNT_JSON,\r\n  GEMINI_API_KEY: process.env.GEMINI_API_KEY,\r\n  GEMINI_MODEL: process.env.GEMINI_MODEL ?? 'models/gemini-1.5-flash'\r\n});\r\n\r\nif (!parsed.success) {\r\n  console.error('âŒ Invalid environment variables', parsed.error.flatten().fieldErrors);\r\n  throw new Error('Invalid environment variables. Check .env configuration.');\r\n}\r\n\r\nconst adminEmails = parsed.data.ADMIN_EMAILS.split(',').map((email) => email.trim().toLowerCase()).filter(Boolean);\r\n\r\nexport const env = {\r\n  ...parsed.data,\r\n  ADMIN_EMAILS: adminEmails,\r\n  GA4_SERVICE_ACCOUNT: JSON.parse(parsed.data.GA4_SERVICE_ACCOUNT_JSON)\r\n} as const;\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,YAAY,kLAAC,CAAC,MAAM,CAAC;IACzB,cAAc,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;IAC7B,cAAc,kLAAC,CAAC,MAAM,GAAG,GAAG;IAC5B,iBAAiB,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;IAChC,kBAAkB,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;IACjC,sBAAsB,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;IACrC,cAAc,kLAAC,CAAC,MAAM,GAAG,OAAO,CAAC;IACjC,sBAAsB,kLAAC,CAAC,MAAM,GAAG,OAAO,CAAC;IACzC,oBAAoB,kLAAC,CAAC,MAAM,GAAG,GAAG;IAClC,qBAAqB,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;IACpC,sBAAsB,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;IACrC,iBAAiB,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;IAChC,0BAA0B,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;IACzC,gBAAgB,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;IAC/B,cAAc,kLAAC,CAAC,MAAM,GAAG,OAAO,CAAC;AACnC;AAEA,MAAM,SAAS,UAAU,SAAS,CAAC;IACjC,cAAc,QAAQ,GAAG,CAAC,YAAY;IACtC,cAAc,QAAQ,GAAG,CAAC,YAAY;IACtC,iBAAiB,QAAQ,GAAG,CAAC,eAAe;IAC5C,kBAAkB,QAAQ,GAAG,CAAC,gBAAgB;IAC9C,sBAAsB,QAAQ,GAAG,CAAC,oBAAoB;IACtD,cAAc,QAAQ,GAAG,CAAC,YAAY,IAAI;IAC1C,sBAAsB,QAAQ,GAAG,CAAC,oBAAoB,IAAI;IAC1D,oBAAoB,QAAQ,GAAG,CAAC,kBAAkB;IAClD,qBAAqB,QAAQ,GAAG,CAAC,mBAAmB;IACpD,sBAAsB,QAAQ,GAAG,CAAC,oBAAoB;IACtD,iBAAiB,QAAQ,GAAG,CAAC,eAAe;IAC5C,0BAA0B,QAAQ,GAAG,CAAC,wBAAwB;IAC9D,gBAAgB,QAAQ,GAAG,CAAC,cAAc;IAC1C,cAAc,QAAQ,GAAG,CAAC,YAAY,IAAI;AAC5C;AAEA,IAAI,CAAC,OAAO,OAAO,EAAE;IACnB,QAAQ,KAAK,CAAC,mCAAmC,OAAO,KAAK,CAAC,OAAO,GAAG,WAAW;IACnF,MAAM,IAAI,MAAM;AAClB;AAEA,MAAM,cAAc,OAAO,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,QAAU,MAAM,IAAI,GAAG,WAAW,IAAI,MAAM,CAAC;AAEnG,MAAM,MAAM;IACjB,GAAG,OAAO,IAAI;IACd,cAAc;IACd,qBAAqB,KAAK,KAAK,CAAC,OAAO,IAAI,CAAC,wBAAwB;AACtE"}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Shaurya/Documents/GitHub/BHIC/src/lib/auth.ts"],"sourcesContent":["import { PrismaAdapter } from '@next-auth/prisma-adapter';\r\nimport type { NextAuthOptions } from 'next-auth';\r\nimport GoogleProvider from 'next-auth/providers/google';\r\n\r\nimport { prisma } from '@/lib/prisma';\r\nimport { env } from '@/lib/env';\r\n\r\nexport const authOptions: NextAuthOptions = {\r\n  adapter: PrismaAdapter(prisma),\r\n  providers: [\r\n    GoogleProvider({\r\n      clientId: env.GOOGLE_CLIENT_ID,\r\n      clientSecret: env.GOOGLE_CLIENT_SECRET,\r\n      authorization: {\r\n        params: {\r\n          scope: 'openid email profile https://www.googleapis.com/auth/gmail.send'\r\n        }\r\n      }\r\n    })\r\n  ],\r\n  pages: {\r\n    signIn: '/auth/signin',\r\n    error: '/auth/not-authorized'\r\n  },\r\n  session: {\r\n    strategy: 'jwt'\r\n  },\r\n  callbacks: {\r\n    async signIn({ user }) {\r\n      if (!user.email) {\r\n        return false;\r\n      }\r\n\r\n      const [, domain] = user.email.split('@');\r\n      if (!domain || domain.toLowerCase() !== env.ALLOWED_EMAIL_DOMAIN.toLowerCase()) {\r\n        return '/auth/not-authorized';\r\n      }\r\n\r\n      return true;\r\n    },\r\n    async jwt({ token, user }) {\r\n      if (user) {\r\n        token.role = (user as { role?: string }).role ?? token.role ?? 'STAFF';\r\n      }\r\n      return token;\r\n    },\r\n    async session({ session, token }) {\r\n      if (session.user) {\r\n        session.user.id = token.sub!;\r\n        session.user.role = (token.role as string) ?? 'STAFF';\r\n      }\r\n      return session;\r\n    }\r\n  },\r\n  events: {\r\n    async signIn({ user }) {\r\n      if (!user.email) return;\r\n      const role = env.ADMIN_EMAILS.includes(user.email.toLowerCase()) ? 'ADMIN' : 'STAFF';\r\n      await prisma.user\r\n        .update({\r\n          where: { id: user.id as string },\r\n          data: {\r\n            role,\r\n            lastLoginAt: new Date()\r\n          }\r\n        })\r\n        .catch(() => undefined);\r\n    }\r\n  },\r\n  secret: env.NEXTAUTH_SECRET\r\n};\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AAEA;AAEA;AACA;;;;;AAEO,MAAM,cAA+B;IAC1C,SAAS,IAAA,qLAAa,EAAC,8HAAM;IAC7B,WAAW;QACT,IAAA,8JAAc,EAAC;YACb,UAAU,wHAAG,CAAC,gBAAgB;YAC9B,cAAc,wHAAG,CAAC,oBAAoB;YACtC,eAAe;gBACb,QAAQ;oBACN,OAAO;gBACT;YACF;QACF;KACD;IACD,OAAO;QACL,QAAQ;QACR,OAAO;IACT;IACA,SAAS;QACP,UAAU;IACZ;IACA,WAAW;QACT,MAAM,QAAO,EAAE,IAAI,EAAE;YACnB,IAAI,CAAC,KAAK,KAAK,EAAE;gBACf,OAAO;YACT;YAEA,MAAM,GAAG,OAAO,GAAG,KAAK,KAAK,CAAC,KAAK,CAAC;YACpC,IAAI,CAAC,UAAU,OAAO,WAAW,OAAO,wHAAG,CAAC,oBAAoB,CAAC,WAAW,IAAI;gBAC9E,OAAO;YACT;YAEA,OAAO;QACT;QACA,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACvB,IAAI,MAAM;gBACR,MAAM,IAAI,GAAG,AAAC,KAA2B,IAAI,IAAI,MAAM,IAAI,IAAI;YACjE;YACA,OAAO;QACT;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,IAAI,QAAQ,IAAI,EAAE;gBAChB,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,GAAG;gBAC3B,QAAQ,IAAI,CAAC,IAAI,GAAG,AAAC,MAAM,IAAI,IAAe;YAChD;YACA,OAAO;QACT;IACF;IACA,QAAQ;QACN,MAAM,QAAO,EAAE,IAAI,EAAE;YACnB,IAAI,CAAC,KAAK,KAAK,EAAE;YACjB,MAAM,OAAO,wHAAG,CAAC,YAAY,CAAC,QAAQ,CAAC,KAAK,KAAK,CAAC,WAAW,MAAM,UAAU;YAC7E,MAAM,8HAAM,CAAC,IAAI,CACd,MAAM,CAAC;gBACN,OAAO;oBAAE,IAAI,KAAK,EAAE;gBAAW;gBAC/B,MAAM;oBACJ;oBACA,aAAa,IAAI;gBACnB;YACF,GACC,KAAK,CAAC,IAAM;QACjB;IACF;IACA,QAAQ,wHAAG,CAAC,eAAe;AAC7B"}},
    {"offset": {"line": 278, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Shaurya/Documents/GitHub/BHIC/src/app/layout.tsx"],"sourcesContent":["import type { Metadata } from \"next\";\r\nimport { getServerSession } from \"next-auth\";\r\nimport { Inter } from \"next/font/google\";\r\n\r\nimport \"@/app/globals.css\";\r\nimport { AuthSessionProvider } from \"@/components/providers/session-provider\";\r\nimport { authOptions } from \"@/lib/auth\";\r\n\r\nconst inter = Inter({ subsets: [\"latin\"], variable: \"--font-inter\" });\r\n\r\nexport const metadata: Metadata = {\r\n  title: \"BHIC Mission Control\",\r\n  description: \"Bald Head Island Conservancy operational dashboard\"\r\n};\r\n\r\nexport default async function RootLayout({ children }: { children: React.ReactNode }) {\r\n  const session = await getServerSession(authOptions);\r\n\r\n  return (\r\n    <html lang=\"en\" className={inter.variable}>\r\n      <body className=\"bg-slate-50 font-[family-name:var(--font-inter)] text-slate-900\">\r\n        <AuthSessionProvider session={session}>{children}</AuthSessionProvider>\r\n      </body>\r\n    </html>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;;AACA;;AAIA;AACA;;;;;;;AAIO,MAAM,WAAqB;IAChC,OAAO;IACP,aAAa;AACf;AAEe,eAAe,WAAW,EAAE,QAAQ,EAAiC;IAClF,MAAM,UAAU,MAAM,IAAA,yJAAgB,EAAC,iIAAW;IAElD,qBACE,8OAAC;QAAK,MAAK;QAAK,WAAW,oJAAK,CAAC,QAAQ;kBACvC,cAAA,8OAAC;YAAK,WAAU;sBACd,cAAA,8OAAC,6KAAmB;gBAAC,SAAS;0BAAU;;;;;;;;;;;;;;;;AAIhD"}}]
}